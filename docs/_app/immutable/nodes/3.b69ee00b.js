import{S as Ie,i as Ne,s as Be,I as Le,y as ue,z as ce,A as fe,J as ct,K as ft,g as G,d as K,B as _e,L as we,M as _t,N as pt,O as ht,P as dt,k as v,l as m,m as b,h as i,n,$ as Ye,b as w,E as u,v as Ee,f as ye,H as Ce,a0 as vt,q as z,a as T,r as q,c as D,V as J,F as Q,G as se,W as mt,C as x,D as ee,u as Te,o as kt,X as Lt,a1 as gt,w as Ge,a2 as Fe,a3 as Xe,a4 as Ct,e as $e,Z as Et,R as xe}from"../chunks/index.0c50f942.js";import{u as yt,a as It,f as et,d as Nt}from"../chunks/db_functions.afba06fa.js";import{S as Bt}from"../chunks/simpleLoader.bf5cc9a2.js";import{b as Je,P as Mt}from"../chunks/libStore.eef645a9.js";import{j as tt,u as wt}from"../chunks/authStore.7de5dcd9.js";import{w as Tt}from"../chunks/singletons.f290b26d.js";import{I as bt}from"../chunks/Icon.c0c07949.js";function Dt(o){let e;const t=o[2].default,l=_t(t,o,o[3],null);return{c(){l&&l.c()},l(r){l&&l.l(r)},m(r,a){l&&l.m(r,a),e=!0},p(r,a){l&&l.p&&(!e||a&8)&&pt(l,t,r,r[3],e?dt(t,r[3],a,null):ht(r[3]),null)},i(r){e||(G(l,r),e=!0)},o(r){K(l,r),e=!1},d(r){l&&l.d(r)}}}function At(o){let e,t;const l=[{name:"book-open"},o[1],{iconNode:o[0]}];let r={$$slots:{default:[Dt]},$$scope:{ctx:o}};for(let a=0;a<l.length;a+=1)r=Le(r,l[a]);return e=new bt({props:r}),{c(){ue(e.$$.fragment)},l(a){ce(e.$$.fragment,a)},m(a,s){fe(e,a,s),t=!0},p(a,[s]){const c=s&3?ct(l,[l[0],s&2&&ft(a[1]),s&1&&{iconNode:a[0]}]):{};s&8&&(c.$$scope={dirty:s,ctx:a}),e.$set(c)},i(a){t||(G(e.$$.fragment,a),t=!0)},o(a){K(e.$$.fragment,a),t=!1},d(a){_e(e,a)}}}function Zt(o,e,t){let{$$slots:l={},$$scope:r}=e;const a=[["path",{d:"M12 7v14"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"}]];return o.$$set=s=>{t(1,e=Le(Le({},e),we(s))),"$$scope"in s&&t(3,r=s.$$scope)},e=we(e),[a,e,l,r]}class Pt extends Ie{constructor(e){super(),Ne(this,e,Zt,At,Be,{})}}const Ut=Pt;function Vt(o){let e;const t=o[2].default,l=_t(t,o,o[3],null);return{c(){l&&l.c()},l(r){l&&l.l(r)},m(r,a){l&&l.m(r,a),e=!0},p(r,a){l&&l.p&&(!e||a&8)&&pt(l,t,r,r[3],e?dt(t,r[3],a,null):ht(r[3]),null)},i(r){e||(G(l,r),e=!0)},o(r){K(l,r),e=!1},d(r){l&&l.d(r)}}}function St(o){let e,t;const l=[{name:"search"},o[1],{iconNode:o[0]}];let r={$$slots:{default:[Vt]},$$scope:{ctx:o}};for(let a=0;a<l.length;a+=1)r=Le(r,l[a]);return e=new bt({props:r}),{c(){ue(e.$$.fragment)},l(a){ce(e.$$.fragment,a)},m(a,s){fe(e,a,s),t=!0},p(a,[s]){const c=s&3?ct(l,[l[0],s&2&&ft(a[1]),s&1&&{iconNode:a[0]}]):{};s&8&&(c.$$scope={dirty:s,ctx:a}),e.$set(c)},i(a){t||(G(e.$$.fragment,a),t=!0)},o(a){K(e.$$.fragment,a),t=!1},d(a){_e(e,a)}}}function Ot(o,e,t){let{$$slots:l={},$$scope:r}=e;const a=[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]];return o.$$set=s=>{t(1,e=Le(Le({},e),we(s))),"$$scope"in s&&t(3,r=s.$$scope)},e=we(e),[a,e,l,r]}class Rt extends Ie{constructor(e){super(),Ne(this,e,Ot,St,Be,{})}}const zt=Rt;function qt(o){let e,t,l,r,a,s,c,p,h,_,d,L,k,P,R,U,S,N,y,E,V,O,F,A,B,Z,W,g,j,C,I,X,H,re,Y,ne,$,pe,te,be,ae,he,le,ke,oe,de,ie,ve,De,Ae,me,Ze,Pe,Ke;return{c(){e=v("h2"),t=z(o[4]),l=z(" libro"),r=T(),a=v("label"),s=z(`Titolo:
                `),c=v("input"),p=T(),h=v("label"),_=z(`Autore:
                `),d=v("input"),L=T(),k=v("input"),P=T(),R=v("label"),U=z(`Editore:
                `),S=v("input"),N=T(),y=v("label"),E=z(`Luogo:
                `),V=v("input"),O=T(),F=v("label"),A=z(`Anno:
                `),B=v("input"),Z=T(),W=v("label"),g=z(`Genere:
                `),j=v("input"),C=T(),I=v("label"),X=z(`Commenti:
                `),H=v("textarea"),re=T(),Y=v("label"),ne=z(`Copertina:
                `),$=v("input"),pe=T(),te=v("div"),be=z(`Letto:
                `),ae=v("input"),he=T(),le=v("div"),ke=z(`Prestito:
                `),oe=v("input"),de=T(),ie=v("div"),ve=v("button"),De=z("Annulla"),Ae=T(),me=v("button"),Ze=z("Salva"),this.h()},l(f){e=m(f,"H2",{});var M=b(e);t=q(M,o[4]),l=q(M," libro"),M.forEach(i),r=D(f),a=m(f,"LABEL",{class:!0});var Ue=b(a);s=q(Ue,`Titolo:
                `),c=m(Ue,"INPUT",{type:!0,class:!0}),Ue.forEach(i),p=D(f),h=m(f,"LABEL",{class:!0});var ge=b(h);_=q(ge,`Autore:
                `),d=m(ge,"INPUT",{type:!0,placeholder:!0,class:!0}),L=D(ge),k=m(ge,"INPUT",{type:!0,placeholder:!0,class:!0}),ge.forEach(i),P=D(f),R=m(f,"LABEL",{class:!0});var Ve=b(R);U=q(Ve,`Editore:
                `),S=m(Ve,"INPUT",{type:!0,class:!0}),Ve.forEach(i),N=D(f),y=m(f,"LABEL",{class:!0});var Se=b(y);E=q(Se,`Luogo:
                `),V=m(Se,"INPUT",{type:!0,class:!0}),Se.forEach(i),O=D(f),F=m(f,"LABEL",{class:!0});var Oe=b(F);A=q(Oe,`Anno:
                `),B=m(Oe,"INPUT",{type:!0}),Oe.forEach(i),Z=D(f),W=m(f,"LABEL",{class:!0});var Re=b(W);g=q(Re,`Genere:
                `),j=m(Re,"INPUT",{type:!0,class:!0}),Re.forEach(i),C=D(f),I=m(f,"LABEL",{class:!0});var ze=b(I);X=q(ze,`Commenti:
                `),H=m(ze,"TEXTAREA",{class:!0}),b(H).forEach(i),ze.forEach(i),re=D(f),Y=m(f,"LABEL",{class:!0});var qe=b(Y);ne=q(qe,`Copertina:
                `),$=m(qe,"INPUT",{type:!0,placeholder:!0,class:!0}),qe.forEach(i),pe=D(f),te=m(f,"DIV",{class:!0});var He=b(te);be=q(He,`Letto:
                `),ae=m(He,"INPUT",{type:!0}),He.forEach(i),he=D(f),le=m(f,"DIV",{class:!0});var je=b(le);ke=q(je,`Prestito:
                `),oe=m(je,"INPUT",{type:!0}),je.forEach(i),de=D(f),ie=m(f,"DIV",{class:!0});var Me=b(ie);ve=m(Me,"BUTTON",{class:!0});var Qe=b(ve);De=q(Qe,"Annulla"),Qe.forEach(i),Ae=D(Me),me=m(Me,"BUTTON",{class:!0});var We=b(me);Ze=q(We,"Salva"),We.forEach(i),Me.forEach(i),this.h()},h(){n(c,"type","text"),c.required=!0,n(c,"class","svelte-1f8t1t9"),n(a,"class","svelte-1f8t1t9"),n(d,"type","text"),n(d,"placeholder","Nome"),n(d,"class","svelte-1f8t1t9"),n(k,"type","text"),n(k,"placeholder","Cognome"),n(k,"class","svelte-1f8t1t9"),n(h,"class","svelte-1f8t1t9"),n(S,"type","text"),n(S,"class","svelte-1f8t1t9"),n(R,"class","svelte-1f8t1t9"),n(V,"type","text"),n(V,"class","svelte-1f8t1t9"),n(y,"class","svelte-1f8t1t9"),n(B,"type","number"),n(F,"class","svelte-1f8t1t9"),n(j,"type","text"),n(j,"class","svelte-1f8t1t9"),n(W,"class","svelte-1f8t1t9"),n(H,"class","svelte-1f8t1t9"),n(I,"class","svelte-1f8t1t9"),n($,"type","text"),n($,"placeholder","Incolla il link del immagine di copertina"),n($,"class","svelte-1f8t1t9"),n(Y,"class","svelte-1f8t1t9"),n(ae,"type","checkbox"),n(te,"class","check svelte-1f8t1t9"),n(oe,"type","checkbox"),n(le,"class","check svelte-1f8t1t9"),n(ve,"class","discard svelte-1f8t1t9"),n(me,"class","svelte-1f8t1t9"),n(ie,"class","buttons svelte-1f8t1t9")},m(f,M){w(f,e,M),u(e,t),u(e,l),w(f,r,M),w(f,a,M),u(a,s),u(a,c),J(c,o[1].title),w(f,p,M),w(f,h,M),u(h,_),u(h,d),J(d,o[1].authorName),u(h,L),u(h,k),J(k,o[1].authorSurname),w(f,P,M),w(f,R,M),u(R,U),u(R,S),J(S,o[1].editor),w(f,N,M),w(f,y,M),u(y,E),u(y,V),J(V,o[1].place),w(f,O,M),w(f,F,M),u(F,A),u(F,B),J(B,o[1].year),w(f,Z,M),w(f,W,M),u(W,g),u(W,j),J(j,o[1].genre),w(f,C,M),w(f,I,M),u(I,X),u(I,H),J(H,o[1].comments),w(f,re,M),w(f,Y,M),u(Y,ne),u(Y,$),J($,o[1].cover),w(f,pe,M),w(f,te,M),u(te,be),u(te,ae),ae.checked=o[1].read,w(f,he,M),w(f,le,M),u(le,ke),u(le,oe),oe.checked=o[1].loaned,w(f,de,M),w(f,ie,M),u(ie,ve),u(ve,De),u(ie,Ae),u(ie,me),u(me,Ze),Pe||(Ke=[Q(c,"input",o[8]),Q(d,"input",o[9]),Q(k,"input",o[10]),Q(S,"input",o[11]),Q(V,"input",o[12]),Q(B,"input",o[13]),Q(j,"input",o[14]),Q(H,"input",o[15]),Q($,"input",o[16]),Q(ae,"change",o[17]),Q(oe,"change",o[18]),Q(ve,"click",o[6]),Q(me,"click",o[5])],Pe=!0)},p(f,M){M&2&&c.value!==f[1].title&&J(c,f[1].title),M&2&&d.value!==f[1].authorName&&J(d,f[1].authorName),M&2&&k.value!==f[1].authorSurname&&J(k,f[1].authorSurname),M&2&&S.value!==f[1].editor&&J(S,f[1].editor),M&2&&V.value!==f[1].place&&J(V,f[1].place),M&2&&vt(B.value)!==f[1].year&&J(B,f[1].year),M&2&&j.value!==f[1].genre&&J(j,f[1].genre),M&2&&J(H,f[1].comments),M&2&&$.value!==f[1].cover&&J($,f[1].cover),M&2&&(ae.checked=f[1].read),M&2&&(oe.checked=f[1].loaned)},i:se,o:se,d(f){f&&i(e),f&&i(r),f&&i(a),f&&i(p),f&&i(h),f&&i(P),f&&i(R),f&&i(N),f&&i(y),f&&i(O),f&&i(F),f&&i(Z),f&&i(W),f&&i(C),f&&i(I),f&&i(re),f&&i(Y),f&&i(pe),f&&i(te),f&&i(he),f&&i(le),f&&i(de),f&&i(ie),Pe=!1,mt(Ke)}}}function Ht(o){let e,t,l,r,a,s,c,p,h;return t=new Bt({}),{c(){e=v("div"),ue(t.$$.fragment),l=T(),r=v("div"),a=v("button"),s=z("Annulla"),this.h()},l(_){e=m(_,"DIV",{class:!0});var d=b(e);ce(t.$$.fragment,d),l=D(d),r=m(d,"DIV",{class:!0});var L=b(r);a=m(L,"BUTTON",{class:!0});var k=b(a);s=q(k,"Annulla"),k.forEach(i),L.forEach(i),d.forEach(i),this.h()},h(){n(a,"class","discard svelte-1f8t1t9"),n(r,"class","buttons svelte-1f8t1t9"),n(e,"class","loader svelte-1f8t1t9")},m(_,d){w(_,e,d),fe(t,e,null),u(e,l),u(e,r),u(r,a),u(a,s),c=!0,p||(h=Q(a,"click",o[6]),p=!0)},p:se,i(_){c||(G(t.$$.fragment,_),c=!0)},o(_){K(t.$$.fragment,_),c=!1},d(_){_&&i(e),_e(t),p=!1,h()}}}function jt(o){let e,t,l,r,a,s;const c=[Ht,qt],p=[];function h(_,d){return _[2]||!_[3]?0:1}return l=h(o),r=p[l]=c[l](o),{c(){e=v("div"),t=v("div"),r.c(),this.h()},l(_){e=m(_,"DIV",{class:!0});var d=b(e);t=m(d,"DIV",{class:!0});var L=b(t);r.l(L),L.forEach(i),d.forEach(i),this.h()},h(){n(t,"class","pop-up svelte-1f8t1t9"),n(e,"class",a=Ye(o[0]?"hidden":"overlay")+" svelte-1f8t1t9")},m(_,d){w(_,e,d),u(e,t),p[l].m(t,null),s=!0},p(_,[d]){let L=l;l=h(_),l===L?p[l].p(_,d):(Ee(),K(p[L],1,1,()=>{p[L]=null}),ye(),r=p[l],r?r.p(_,d):(r=p[l]=c[l](_),r.c()),G(r,1),r.m(t,null)),(!s||d&1&&a!==(a=Ye(_[0]?"hidden":"overlay")+" svelte-1f8t1t9"))&&n(e,"class",a)},i(_){s||(G(r),s=!0)},o(_){K(r),s=!1},d(_){_&&i(e),p[l].d()}}}function Gt(o,e,t){let l;Ce(o,Je,O=>t(3,l=O));let{hidden:r=!0}=e,{length:a}=e,{book:s={title:"",authorName:"",authorSurname:"",editor:"",place:"",year:"",genre:"",comments:"",read:!1,loaned:!1}}=e,c=s.title?"Modifica":"Aggiungi",p=!1;async function h(){t(2,p=!0),t(7,a=s.id??a),console.log(l),l&&await yt(`protectedData/${l}/${a}`,{...s,id:a}).then(()=>{t(2,p=!1),t(0,r=!0)}).then(()=>window.location.reload()).catch(()=>{t(2,p=!1),t(1,s={title:"",authorName:"",authorSurname:"",editor:"",year:"",place:"",genre:"",comments:"",read:!1,loaned:!1})})}function _(){t(0,r=!0),t(1,s={title:"",authorName:"",authorSurname:"",editor:"",year:"",place:"",genre:"",comments:"",read:!1,loaned:!1})}function d(){s.title=this.value,t(1,s)}function L(){s.authorName=this.value,t(1,s)}function k(){s.authorSurname=this.value,t(1,s)}function P(){s.editor=this.value,t(1,s)}function R(){s.place=this.value,t(1,s)}function U(){s.year=vt(this.value),t(1,s)}function S(){s.genre=this.value,t(1,s)}function N(){s.comments=this.value,t(1,s)}function y(){s.cover=this.value,t(1,s)}function E(){s.read=this.checked,t(1,s)}function V(){s.loaned=this.checked,t(1,s)}return o.$$set=O=>{"hidden"in O&&t(0,r=O.hidden),"length"in O&&t(7,a=O.length),"book"in O&&t(1,s=O.book)},[r,s,p,l,c,h,_,a,d,L,k,P,R,U,S,N,y,E,V]}class Ft extends Ie{constructor(e){super(),Ne(this,e,Gt,jt,Be,{hidden:0,length:7,book:1})}}function Xt(o){let e,t,l,r,a,s,c,p,h,_,d,L,k,P,R,U,S,N,y,E,V,O,F,A,B,Z,W,g,j;return{c(){e=v("div"),t=v("div"),l=v("ul"),r=v("li"),a=x("svg"),s=x("path"),c=T(),p=v("li"),h=x("svg"),_=x("path"),d=T(),L=v("li"),k=x("svg"),P=x("path"),R=T(),U=v("li"),S=x("svg"),N=x("path"),y=T(),E=v("li"),V=x("svg"),O=x("path"),F=T(),A=v("li"),B=x("svg"),Z=x("path"),W=T(),g=v("span"),j=z("Loading"),this.h()},l(C){e=m(C,"DIV",{class:!0});var I=b(e);t=m(I,"DIV",{class:!0});var X=b(t);l=m(X,"UL",{class:!0});var H=b(l);r=m(H,"LI",{class:!0});var re=b(r);a=ee(re,"svg",{fill:!0,viewBox:!0,class:!0});var Y=b(a);s=ee(Y,"path",{d:!0}),b(s).forEach(i),Y.forEach(i),re.forEach(i),c=D(H),p=m(H,"LI",{class:!0});var ne=b(p);h=ee(ne,"svg",{fill:!0,viewBox:!0,class:!0});var $=b(h);_=ee($,"path",{d:!0}),b(_).forEach(i),$.forEach(i),ne.forEach(i),d=D(H),L=m(H,"LI",{class:!0});var pe=b(L);k=ee(pe,"svg",{fill:!0,viewBox:!0,class:!0});var te=b(k);P=ee(te,"path",{d:!0}),b(P).forEach(i),te.forEach(i),pe.forEach(i),R=D(H),U=m(H,"LI",{class:!0});var be=b(U);S=ee(be,"svg",{fill:!0,viewBox:!0,class:!0});var ae=b(S);N=ee(ae,"path",{d:!0}),b(N).forEach(i),ae.forEach(i),be.forEach(i),y=D(H),E=m(H,"LI",{class:!0});var he=b(E);V=ee(he,"svg",{fill:!0,viewBox:!0,class:!0});var le=b(V);O=ee(le,"path",{d:!0}),b(O).forEach(i),le.forEach(i),he.forEach(i),F=D(H),A=m(H,"LI",{class:!0});var ke=b(A);B=ee(ke,"svg",{fill:!0,viewBox:!0,class:!0});var oe=b(B);Z=ee(oe,"path",{d:!0}),b(Z).forEach(i),oe.forEach(i),ke.forEach(i),H.forEach(i),W=D(X),X.forEach(i),g=m(I,"SPAN",{class:!0});var de=b(g);j=q(de,"Loading"),de.forEach(i),I.forEach(i),this.h()},h(){n(s,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),n(a,"fill","currentColor"),n(a,"viewBox","0 0 90 120"),n(a,"class","svelte-1lyp77k"),n(r,"class","svelte-1lyp77k"),n(_,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),n(h,"fill","currentColor"),n(h,"viewBox","0 0 90 120"),n(h,"class","svelte-1lyp77k"),n(p,"class","svelte-1lyp77k"),n(P,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),n(k,"fill","currentColor"),n(k,"viewBox","0 0 90 120"),n(k,"class","svelte-1lyp77k"),n(L,"class","svelte-1lyp77k"),n(N,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),n(S,"fill","currentColor"),n(S,"viewBox","0 0 90 120"),n(S,"class","svelte-1lyp77k"),n(U,"class","svelte-1lyp77k"),n(O,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),n(V,"fill","currentColor"),n(V,"viewBox","0 0 90 120"),n(V,"class","svelte-1lyp77k"),n(E,"class","svelte-1lyp77k"),n(Z,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),n(B,"fill","currentColor"),n(B,"viewBox","0 0 90 120"),n(B,"class","svelte-1lyp77k"),n(A,"class","svelte-1lyp77k"),n(l,"class","svelte-1lyp77k"),n(t,"class","svelte-1lyp77k"),n(g,"class","svelte-1lyp77k"),n(e,"class","loader svelte-1lyp77k")},m(C,I){w(C,e,I),u(e,t),u(t,l),u(l,r),u(r,a),u(a,s),u(l,c),u(l,p),u(p,h),u(h,_),u(l,d),u(l,L),u(L,k),u(k,P),u(l,R),u(l,U),u(U,S),u(S,N),u(l,y),u(l,E),u(E,V),u(V,O),u(l,F),u(l,A),u(A,B),u(B,Z),u(t,W),u(e,g),u(g,j)},p:se,i:se,o:se,d(C){C&&i(e)}}}class Jt extends Ie{constructor(e){super(),Ne(this,e,null,Xt,Be,{})}}function lt(o,e,t){const l=o.slice();return l[26]=e[t],l}function st(o,e,t){const l=o.slice();return l[13]=e[t],l}function rt(o){let e,t=[],l=new Map,r=o[8];const a=s=>s[13].id;for(let s=0;s<r.length;s+=1){let c=st(o,r,s),p=a(c);l.set(p,t[s]=at(p,c))}return{c(){e=v("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=m(s,"DIV",{class:!0});var c=b(e);for(let p=0;p<t.length;p+=1)t[p].l(c);c.forEach(i),this.h()},h(){n(e,"class","toast-container svelte-ke4rn1")},m(s,c){w(s,e,c);for(let p=0;p<t.length;p+=1)t[p]&&t[p].m(e,null)},p(s,c){c&256&&(r=s[8],t=gt(t,c,a,1,s,r,l,e,Ct,at,null,st))},d(s){s&&i(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function at(o,e){let t,l=e[13].message+"",r,a;return{key:o,first:null,c(){t=v("div"),r=z(l),this.h()},l(s){t=m(s,"DIV",{class:!0});var c=b(t);r=q(c,l),c.forEach(i),this.h()},h(){n(t,"class",a="toast "+e[13].type+" svelte-ke4rn1"),this.first=t},m(s,c){w(s,t,c),u(t,r)},p(s,c){e=s,c&256&&l!==(l=e[13].message+"")&&Te(r,l),c&256&&a!==(a="toast "+e[13].type+" svelte-ke4rn1")&&n(t,"class",a)},d(s){s&&i(t)}}}function ot(o){let e,t,l,r,a;return t=new Mt({props:{size:24}}),{c(){e=v("button"),ue(t.$$.fragment),this.h()},l(s){e=m(s,"BUTTON",{class:!0,"aria-label":!0});var c=b(e);ce(t.$$.fragment,c),c.forEach(i),this.h()},h(){n(e,"class","add-book-button svelte-ke4rn1"),n(e,"aria-label","Add new book")},m(s,c){w(s,e,c),fe(t,e,null),l=!0,r||(a=Q(e,"click",o[10]),r=!0)},p:se,i(s){l||(G(t.$$.fragment,s),l=!0)},o(s){K(t.$$.fragment,s),l=!1},d(s){s&&i(e),_e(t),r=!1,a()}}}function nt(o){let e,t,l,r,a;function s(_){o[15](_)}function c(_){o[16](_)}function p(_){o[17](_)}let h={};return o[3]!==void 0&&(h.hidden=o[3]),o[4]!==void 0&&(h.book=o[4]),o[1].length!==void 0&&(h.length=o[1].length),e=new Ft({props:h}),Ge.push(()=>Fe(e,"hidden",s)),Ge.push(()=>Fe(e,"book",c)),Ge.push(()=>Fe(e,"length",p)),{c(){ue(e.$$.fragment)},l(_){ce(e.$$.fragment,_)},m(_,d){fe(e,_,d),a=!0},p(_,d){const L={};!t&&d&8&&(t=!0,L.hidden=_[3],Xe(()=>t=!1)),!l&&d&16&&(l=!0,L.book=_[4],Xe(()=>l=!1)),!r&&d&2&&(r=!0,L.length=_[1].length,Xe(()=>r=!1)),e.$set(L)},i(_){a||(G(e.$$.fragment,_),a=!0)},o(_){K(e.$$.fragment,_),a=!1},d(_){_e(e,_)}}}function Kt(o){let e,t,l;return t=new Jt({}),{c(){e=v("div"),ue(t.$$.fragment),this.h()},l(r){e=m(r,"DIV",{class:!0});var a=b(e);ce(t.$$.fragment,a),a.forEach(i),this.h()},h(){n(e,"class","loader-container svelte-ke4rn1")},m(r,a){w(r,e,a),fe(t,e,null),l=!0},p:se,i(r){l||(G(t.$$.fragment,r),l=!0)},o(r){K(t.$$.fragment,r),l=!1},d(r){r&&i(e),_e(t)}}}function Qt(o){let e,t,l,r;const a=[Yt,Wt],s=[];function c(p,h){return p[6].length>0?0:1}return e=c(o),t=s[e]=a[e](o),{c(){t.c(),l=$e()},l(p){t.l(p),l=$e()},m(p,h){s[e].m(p,h),w(p,l,h),r=!0},p(p,h){let _=e;e=c(p),e===_?s[e].p(p,h):(Ee(),K(s[_],1,1,()=>{s[_]=null}),ye(),t=s[e],t?t.p(p,h):(t=s[e]=a[e](p),t.c()),G(t,1),t.m(l.parentNode,l))},i(p){r||(G(t),r=!0)},o(p){K(t),r=!1},d(p){s[e].d(p),p&&i(l)}}}function Wt(o){let e,t,l,r,a,s,c,p,h;return t=new Ut({props:{size:48}}),{c(){e=v("div"),ue(t.$$.fragment),l=T(),r=v("p"),a=z("No books found"),s=T(),c=v("p"),p=z("Try adjusting your search or add new books"),this.h()},l(_){e=m(_,"DIV",{class:!0});var d=b(e);ce(t.$$.fragment,d),l=D(d),r=m(d,"P",{});var L=b(r);a=q(L,"No books found"),L.forEach(i),s=D(d),c=m(d,"P",{class:!0});var k=b(c);p=q(k,"Try adjusting your search or add new books"),k.forEach(i),d.forEach(i),this.h()},h(){n(c,"class","empty-state-subtitle svelte-ke4rn1"),n(e,"class","empty-state svelte-ke4rn1")},m(_,d){w(_,e,d),fe(t,e,null),u(e,l),u(e,r),u(r,a),u(e,s),u(e,c),u(c,p),h=!0},p:se,i(_){h||(G(t.$$.fragment,_),h=!0)},o(_){K(t.$$.fragment,_),h=!1},d(_){_&&i(e),_e(t)}}}function Yt(o){let e,t=o[6],l=[];for(let r=0;r<t.length;r+=1)l[r]=ut(lt(o,t,r));return{c(){e=v("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=m(r,"DIV",{class:!0});var a=b(e);for(let s=0;s<l.length;s+=1)l[s].l(a);a.forEach(i),this.h()},h(){n(e,"class","book-grid svelte-ke4rn1")},m(r,a){w(r,e,a);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null)},p(r,a){if(a&6336){t=r[6];let s;for(s=0;s<t.length;s+=1){const c=lt(r,t,s);l[s]?l[s].p(c,a):(l[s]=ut(c),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},i:se,o:se,d(r){r&&i(e),Et(l,r)}}}function it(o){let e,t,l,r,a,s,c,p,h;function _(){return o[19](o[26])}function d(){return o[20](o[26])}return{c(){e=v("div"),t=v("button"),l=z("Modifica"),r=T(),a=v("button"),s=z("Rimuovi"),this.h()},l(L){e=m(L,"DIV",{class:!0});var k=b(e);t=m(k,"BUTTON",{class:!0});var P=b(t);l=q(P,"Modifica"),P.forEach(i),r=D(k),a=m(k,"BUTTON",{class:!0,"aria-label":!0});var R=b(a);s=q(R,"Rimuovi"),R.forEach(i),k.forEach(i),this.h()},h(){n(t,"class","edit-button svelte-ke4rn1"),n(a,"class","delete-button svelte-ke4rn1"),n(a,"aria-label",c=`Remove ${o[26].title}`),n(e,"class","actions svelte-ke4rn1")},m(L,k){w(L,e,k),u(e,t),u(t,l),u(e,r),u(e,a),u(a,s),p||(h=[Q(t,"click",_),Q(a,"click",d)],p=!0)},p(L,k){o=L,k&64&&c!==(c=`Remove ${o[26].title}`)&&n(a,"aria-label",c)},d(L){L&&i(e),p=!1,mt(h)}}}function ut(o){let e,t,l,r,a,s,c,p,h=o[26].title+"",_,d,L,k,P=o[26].author+"",R,U,S,N=o[7]&&it(o);return{c(){e=v("article"),t=v("div"),l=v("img"),s=T(),c=v("div"),p=v("h2"),_=z(h),d=T(),L=v("p"),k=z("by "),R=z(P),U=T(),N&&N.c(),S=T(),this.h()},l(y){e=m(y,"ARTICLE",{class:!0});var E=b(e);t=m(E,"DIV",{class:!0});var V=b(t);l=m(V,"IMG",{class:!0,src:!0,alt:!0,loading:!0}),V.forEach(i),s=D(E),c=m(E,"DIV",{class:!0});var O=b(c);p=m(O,"H2",{class:!0});var F=b(p);_=q(F,h),F.forEach(i),d=D(O),L=m(O,"P",{class:!0});var A=b(L);k=q(A,"by "),R=q(A,P),A.forEach(i),O.forEach(i),U=D(E),N&&N.l(E),S=D(E),E.forEach(i),this.h()},h(){n(l,"class","book-cover svelte-ke4rn1"),xe(l.src,r=o[26].cover)||n(l,"src",r),n(l,"alt",a=`Cover of ${o[26].title}`),n(l,"loading","lazy"),n(t,"class","cover-container svelte-ke4rn1"),n(p,"class","book-title svelte-ke4rn1"),n(L,"class","book-author svelte-ke4rn1"),n(c,"class","book-info svelte-ke4rn1"),n(e,"class","book-card svelte-ke4rn1")},m(y,E){w(y,e,E),u(e,t),u(t,l),u(e,s),u(e,c),u(c,p),u(p,_),u(c,d),u(c,L),u(L,k),u(L,R),u(e,U),N&&N.m(e,null),u(e,S)},p(y,E){E&64&&!xe(l.src,r=y[26].cover)&&n(l,"src",r),E&64&&a!==(a=`Cover of ${y[26].title}`)&&n(l,"alt",a),E&64&&h!==(h=y[26].title+"")&&Te(_,h),E&64&&P!==(P=y[26].author+"")&&Te(R,P),y[7]?N?N.p(y,E):(N=it(y),N.c(),N.m(e,S)):N&&(N.d(1),N=null)},d(y){y&&i(e),N&&N.d()}}}function $t(o){let e,t,l,r,a,s,c,p,h,_=o[2].replace("_"," ")+"",d,L,k,P,R,U,S,N,y,E,V,O,F,A=o[8].length&&rt(o),B=o[7]&&ot(o),Z=!o[3]&&nt(o);P=new zt({props:{size:20}});const W=[Qt,Kt],g=[];function j(C,I){return C[5]?1:0}return y=j(o),E=g[y]=W[y](o),{c(){A&&A.c(),e=T(),B&&B.c(),t=T(),l=v("main"),Z&&Z.c(),r=T(),a=v("div"),s=v("h1"),c=z("Biblioteca:"),p=T(),h=v("h1"),d=z(_),L=T(),k=v("div"),ue(P.$$.fragment),R=T(),U=v("input"),S=T(),N=v("div"),E.c(),this.h()},l(C){A&&A.l(C),e=D(C),B&&B.l(C),t=D(C),l=m(C,"MAIN",{class:!0});var I=b(l);Z&&Z.l(I),r=D(I),a=m(I,"DIV",{class:!0});var X=b(a);s=m(X,"H1",{class:!0});var H=b(s);c=q(H,"Biblioteca:"),H.forEach(i),p=D(X),h=m(X,"H1",{class:!0});var re=b(h);d=q(re,_),re.forEach(i),L=D(X),k=m(X,"DIV",{class:!0});var Y=b(k);ce(P.$$.fragment,Y),R=D(Y),U=m(Y,"INPUT",{type:!0,placeholder:!0,"aria-label":!0,class:!0}),Y.forEach(i),X.forEach(i),S=D(I),N=m(I,"DIV",{class:!0});var ne=b(N);E.l(ne),ne.forEach(i),I.forEach(i),this.h()},h(){n(s,"class","page-title svelte-ke4rn1"),n(h,"class","lib-title"),n(U,"type","text"),n(U,"placeholder","Cerca libri..."),n(U,"aria-label","Search books"),n(U,"class","svelte-ke4rn1"),n(k,"class","search-bar svelte-ke4rn1"),n(a,"class","top-actions svelte-ke4rn1"),n(N,"class","book-grid-container svelte-ke4rn1"),n(l,"class","content svelte-ke4rn1")},m(C,I){A&&A.m(C,I),w(C,e,I),B&&B.m(C,I),w(C,t,I),w(C,l,I),Z&&Z.m(l,null),u(l,r),u(l,a),u(a,s),u(s,c),u(a,p),u(a,h),u(h,d),u(a,L),u(a,k),fe(P,k,null),u(k,R),u(k,U),J(U,o[0]),u(l,S),u(l,N),g[y].m(N,null),V=!0,O||(F=Q(U,"input",o[18]),O=!0)},p(C,[I]){C[8].length?A?A.p(C,I):(A=rt(C),A.c(),A.m(e.parentNode,e)):A&&(A.d(1),A=null),C[7]?B?(B.p(C,I),I&128&&G(B,1)):(B=ot(C),B.c(),G(B,1),B.m(t.parentNode,t)):B&&(Ee(),K(B,1,1,()=>{B=null}),ye()),C[3]?Z&&(Ee(),K(Z,1,1,()=>{Z=null}),ye()):Z?(Z.p(C,I),I&8&&G(Z,1)):(Z=nt(C),Z.c(),G(Z,1),Z.m(l,r)),(!V||I&4)&&_!==(_=C[2].replace("_"," ")+"")&&Te(d,_),I&1&&U.value!==C[0]&&J(U,C[0]);let X=y;y=j(C),y===X?g[y].p(C,I):(Ee(),K(g[X],1,1,()=>{g[X]=null}),ye(),E=g[y],E?E.p(C,I):(E=g[y]=W[y](C),E.c()),G(E,1),E.m(N,null))},i(C){V||(G(B),G(Z),G(P.$$.fragment,C),G(E),V=!0)},o(C){K(B),K(Z),K(P.$$.fragment,C),K(E),V=!1},d(C){A&&A.d(C),C&&i(e),B&&B.d(C),C&&i(t),C&&i(l),Z&&Z.d(),_e(P),g[y].d(),O=!1,F()}}}function xt(o,e,t){let l,r,a,s;Ce(o,Je,g=>t(2,l=g)),Ce(o,tt,g=>t(14,r=g)),Ce(o,wt,g=>t(23,a=g));const c=Tt([]);Ce(o,c,g=>t(8,s=g));function p(g,j="info"){const C=Math.random().toString(36);c.update(I=>[...I,{id:C,message:g,type:j}]),setTimeout(()=>{c.update(I=>I.filter(X=>X.id!==C))},3e3)}kt(async()=>{tt.set(await It(a.uid).then(g=>t(7,U=g))),R=a.photoURL??"/profile_placeholder.png",await et(`users/${a.uid}/biblioteca`).then(async g=>{console.log("userLib:",g),Lt(Je,l=g,l),await N(g)})});let h=!0,_,d=!0,L="",k=[],P=[],R,U;const S=g=>{t(4,_=g),t(3,h=!h)},N=async g=>{t(5,d=!0),await et(`protectedData/${g}`).then(j=>{t(1,k=j),t(6,P=j),t(5,d=!1)})},y=()=>{t(3,h=!h)},E=g=>{S(g)},V=async g=>{try{t(5,d=!0),await Nt(`protectedData/${l}/${g.id}`),await N(l),p("Book removed successfully","success")}catch(j){p("Failed to remove book","error"),console.error(j)}finally{t(5,d=!1)}};function O(g){h=g,t(3,h)}function F(g){_=g,t(4,_)}function A(g){o.$$.not_equal(k.length,g)&&(k.length=g,t(1,k))}function B(){L=this.value,t(0,L)}const Z=g=>E(g),W=g=>V(g);return o.$$.update=()=>{o.$$.dirty&16384&&t(7,U=r),o.$$.dirty&3&&L.trim()&&k.filter(g=>g.title.toLowerCase().includes(L.toLowerCase())),o.$$.dirty&4&&l&&N(l)},[L,k,l,h,_,d,P,U,s,c,y,E,V,p,r,O,F,A,B,Z,W]}class nl extends Ie{constructor(e){super(),Ne(this,e,xt,$t,Be,{})}}export{nl as component};
