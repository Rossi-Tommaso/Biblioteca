import{S as Oe,i as qe,s as je,I as be,y as ne,z as ie,A as ce,J as vt,K as pt,g as R,d as U,B as ue,L as ye,M as bt,N as mt,O as gt,P as kt,k as m,q as w,a as P,l as g,m as b,r as A,h as u,c as V,n as c,b as O,E as r,u as oe,f as ge,H as rt,o as $t,Z as wt,v as ke,a0 as At,C as De,D as Be,G as J,e as Le,$ as zt,T as ot,U as Dt,_ as nt,F as te,Y as Et,X as it}from"../chunks/index.d08effdb.js";import{S as Bt}from"../chunks/simpleLoader.fc6986a4.js";import{s as It,m as yt,u as Lt}from"../chunks/authStore.690c0957.js";import{a as Pt,f as Ie,g as Vt,u as Tt,c as Ct}from"../chunks/db_functions.fe3bdab1.js";import{e as ct}from"../chunks/singletons.3fa68333.js";import{b as Me,P as St}from"../chunks/libStore.6bed4b8f.js";import{I as Nt}from"../chunks/Icon.4dc19c6d.js";import{S as Ht}from"../chunks/settings.32f05e59.js";function Rt(i){let e;const l=i[2].default,t=bt(l,i,i[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,a){t&&t.m(s,a),e=!0},p(s,a){t&&t.p&&(!e||a&8)&&mt(t,l,s,s[3],e?kt(l,s[3],a,null):gt(s[3]),null)},i(s){e||(R(t,s),e=!0)},o(s){U(t,s),e=!1},d(s){t&&t.d(s)}}}function Ut(i){let e,l;const t=[{name:"arrow-right-left"},i[1],{iconNode:i[0]}];let s={$$slots:{default:[Rt]},$$scope:{ctx:i}};for(let a=0;a<t.length;a+=1)s=be(s,t[a]);return e=new Nt({props:s}),{c(){ne(e.$$.fragment)},l(a){ie(e.$$.fragment,a)},m(a,o){ce(e,a,o),l=!0},p(a,[o]){const d=o&3?vt(t,[t[0],o&2&&pt(a[1]),o&1&&{iconNode:a[0]}]):{};o&8&&(d.$$scope={dirty:o,ctx:a}),e.$set(d)},i(a){l||(R(e.$$.fragment,a),l=!0)},o(a){U(e.$$.fragment,a),l=!1},d(a){ue(e,a)}}}function Mt(i,e,l){let{$$slots:t={},$$scope:s}=e;const a=[["path",{d:"m16 3 4 4-4 4"}],["path",{d:"M20 7H4"}],["path",{d:"m8 21-4-4 4-4"}],["path",{d:"M4 17h16"}]];return i.$$set=o=>{l(1,e=be(be({},e),ye(o))),"$$scope"in o&&l(3,s=o.$$scope)},e=ye(e),[a,e,t,s]}class Ot extends Oe{constructor(e){super(),qe(this,e,Mt,Ut,je,{})}}const qt=Ot;function jt(i){let e;const l=i[2].default,t=bt(l,i,i[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,a){t&&t.m(s,a),e=!0},p(s,a){t&&t.p&&(!e||a&8)&&mt(t,l,s,s[3],e?kt(l,s[3],a,null):gt(s[3]),null)},i(s){e||(R(t,s),e=!0)},o(s){U(t,s),e=!1},d(s){t&&t.d(s)}}}function Gt(i){let e,l;const t=[{name:"library"},i[1],{iconNode:i[0]}];let s={$$slots:{default:[jt]},$$scope:{ctx:i}};for(let a=0;a<t.length;a+=1)s=be(s,t[a]);return e=new Nt({props:s}),{c(){ne(e.$$.fragment)},l(a){ie(e.$$.fragment,a)},m(a,o){ce(e,a,o),l=!0},p(a,[o]){const d=o&3?vt(t,[t[0],o&2&&pt(a[1]),o&1&&{iconNode:a[0]}]):{};o&8&&(d.$$scope={dirty:o,ctx:a}),e.$set(d)},i(a){l||(R(e.$$.fragment,a),l=!0)},o(a){U(e.$$.fragment,a),l=!1},d(a){ue(e,a)}}}function Ft(i,e,l){let{$$slots:t={},$$scope:s}=e;const a=[["path",{d:"m16 6 4 14"}],["path",{d:"M12 6v14"}],["path",{d:"M8 8v12"}],["path",{d:"M4 4v16"}]];return i.$$set=o=>{l(1,e=be(be({},e),ye(o))),"$$scope"in o&&l(3,s=o.$$scope)},e=ye(e),[a,e,t,s]}class Jt extends Oe{constructor(e){super(),qe(this,e,Ft,Gt,je,{})}}const Kt=Jt;function ut(i,e,l){const t=i.slice();return t[22]=e[l],t}function ft(i,e,l){const t=i.slice();return t[25]=e[l],t}function Xt(i){let e,l,t,s,a,o,d,v,h,_,p,n,z,f="(",k,L,D,$,M,q=")",B,y,E,I;return{c(){e=m("div"),l=m("div"),t=m("div"),s=De("svg"),a=De("circle"),o=De("line"),d=De("line"),v=P(),h=m("h3"),_=w("Accesso non autorizzato"),p=P(),n=m("p"),z=w(`Non hai accesso a questa biblioteca. Per favore, contatta
          l'amministratore per richiedere la creazione di una nuova biblioteca `),k=w(f),L=w(`nella
          mail `),D=m("b"),$=w("specifica il nome della biblioteca"),M=w(" che vuoi creare"),B=w(q),y=P(),E=m("a"),I=w("Contatta l'Amministratore"),this.h()},l(T){e=g(T,"DIV",{class:!0});var F=b(e);l=g(F,"DIV",{class:!0});var j=b(l);t=g(j,"DIV",{class:!0});var fe=b(t);s=Be(fe,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var W=b(s);a=Be(W,"circle",{cx:!0,cy:!0,r:!0}),b(a).forEach(u),o=Be(W,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),b(o).forEach(u),d=Be(W,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),b(d).forEach(u),W.forEach(u),fe.forEach(u),v=V(j),h=g(j,"H3",{class:!0});var X=b(h);_=A(X,"Accesso non autorizzato"),X.forEach(u),p=V(j),n=g(j,"P",{class:!0});var S=b(n);z=A(S,`Non hai accesso a questa biblioteca. Per favore, contatta
          l'amministratore per richiedere la creazione di una nuova biblioteca `),k=A(S,f),L=A(S,`nella
          mail `),D=g(S,"B",{});var G=b(D);$=A(G,"specifica il nome della biblioteca"),G.forEach(u),M=A(S," che vuoi creare"),B=A(S,q),S.forEach(u),y=V(j),E=g(j,"A",{href:!0,class:!0});var le=b(E);I=A(le,"Contatta l'Amministratore"),le.forEach(u),j.forEach(u),F.forEach(u),this.h()},h(){c(a,"cx","12"),c(a,"cy","12"),c(a,"r","10"),c(o,"x1","15"),c(o,"y1","9"),c(o,"x2","9"),c(o,"y2","15"),c(d,"x1","9"),c(d,"y1","9"),c(d,"x2","15"),c(d,"y2","15"),c(s,"xmlns","http://www.w3.org/2000/svg"),c(s,"class","icon-unauthorized svelte-195id1z"),c(s,"viewBox","0 0 24 24"),c(s,"fill","none"),c(s,"stroke","currentColor"),c(s,"stroke-width","2"),c(s,"stroke-linecap","round"),c(s,"stroke-linejoin","round"),c(t,"class","icon-container svelte-195id1z"),c(h,"class","svelte-195id1z"),c(n,"class","svelte-195id1z"),c(E,"href","mailto:adm.biblioteca.6a8e6.6809336095@gmail.com"),c(E,"class","contact-button svelte-195id1z"),c(l,"class","unauthorized-content svelte-195id1z"),c(e,"class","unauthorized-container svelte-195id1z")},m(T,F){O(T,e,F),r(e,l),r(l,t),r(t,s),r(s,a),r(s,o),r(s,d),r(l,v),r(l,h),r(h,_),r(l,p),r(l,n),r(n,z),r(n,k),r(n,L),r(n,D),r(D,$),r(n,M),r(n,B),r(l,y),r(l,E),r(E,I)},p:J,i:J,o:J,d(T){T&&u(e)}}}function Yt(i){let e,l,t,s,a,o,d=i[4].totalBooks+"",v,h,_,p,n,z,f,k=i[4].booksRead+"",L,D,$,M,q,B,y,E=i[4].unread+"",I,T,F,j,fe,W,X,S,G,le,Y,me,Pe,Ve,K,Z,_e,se,Te,de,Ce,Se,Q,he,ae,He,ve,Re,Ue,re;const Ge=[Wt,Qt,Zt],x=[];function Fe(N,C){return!N[2]&&N[1].length>0?0:N[2]?2:1}S=Fe(i),G=x[S]=Ge[S](i),se=new Kt({}),ae=new Ht({});let H=i[3]===2&&dt(i);return{c(){e=m("div"),l=m("div"),t=m("h3"),s=w("Libri Totali"),a=P(),o=m("p"),v=w(d),h=P(),_=m("div"),p=m("h3"),n=w("Libri Letti"),z=P(),f=m("p"),L=w(k),D=P(),$=m("div"),M=m("h3"),q=w("Non letti"),B=P(),y=m("p"),I=w(E),T=P(),F=m("div"),j=m("h2"),fe=w("Ultimi Libri Aggiunti"),W=P(),X=m("div"),G.c(),le=P(),Y=m("div"),me=m("h2"),Pe=w("Azioni Rapide"),Ve=P(),K=m("div"),Z=m("a"),_e=m("span"),ne(se.$$.fragment),Te=P(),de=m("span"),Ce=w("Visualizza Biblioteca"),Se=P(),Q=m("a"),he=m("span"),ne(ae.$$.fragment),He=P(),ve=m("span"),Re=w("Impostazioni"),Ue=P(),H&&H.c(),this.h()},l(N){e=g(N,"DIV",{class:!0});var C=b(e);l=g(C,"DIV",{class:!0});var ee=b(l);t=g(ee,"H3",{});var Je=b(t);s=A(Je,"Libri Totali"),Je.forEach(u),a=V(ee),o=g(ee,"P",{class:!0});var Ke=b(o);v=A(Ke,d),Ke.forEach(u),ee.forEach(u),h=V(C),_=g(C,"DIV",{class:!0});var ze=b(_);p=g(ze,"H3",{});var Xe=b(p);n=A(Xe,"Libri Letti"),Xe.forEach(u),z=V(ze),f=g(ze,"P",{class:!0});var Ye=b(f);L=A(Ye,k),Ye.forEach(u),ze.forEach(u),D=V(C),$=g(C,"DIV",{class:!0});var Ee=b($);M=g(Ee,"H3",{});var Ze=b(M);q=A(Ze,"Non letti"),Ze.forEach(u),B=V(Ee),y=g(Ee,"P",{class:!0});var Qe=b(y);I=A(Qe,E),Qe.forEach(u),Ee.forEach(u),C.forEach(u),T=V(N),F=g(N,"DIV",{class:!0});var Ne=b(F);j=g(Ne,"H2",{class:!0});var We=b(j);fe=A(We,"Ultimi Libri Aggiunti"),We.forEach(u),W=V(Ne),X=g(Ne,"DIV",{class:!0});var xe=b(X);G.l(xe),xe.forEach(u),Ne.forEach(u),le=V(N),Y=g(N,"DIV",{class:!0});var $e=b(Y);me=g($e,"H2",{});var et=b(me);Pe=A(et,"Azioni Rapide"),et.forEach(u),Ve=V($e),K=g($e,"DIV",{class:!0});var pe=b(K);Z=g(pe,"A",{href:!0,class:!0});var we=b(Z);_e=g(we,"SPAN",{class:!0});var tt=b(_e);ie(se.$$.fragment,tt),tt.forEach(u),Te=V(we),de=g(we,"SPAN",{class:!0});var lt=b(de);Ce=A(lt,"Visualizza Biblioteca"),lt.forEach(u),we.forEach(u),Se=V(pe),Q=g(pe,"A",{href:!0,class:!0});var Ae=b(Q);he=g(Ae,"SPAN",{class:!0});var st=b(he);ie(ae.$$.fragment,st),st.forEach(u),He=V(Ae),ve=g(Ae,"SPAN",{class:!0});var at=b(ve);Re=A(at,"Impostazioni"),at.forEach(u),Ae.forEach(u),Ue=V(pe),H&&H.l(pe),pe.forEach(u),$e.forEach(u),this.h()},h(){c(o,"class","stat-number svelte-195id1z"),c(l,"class","stat-card svelte-195id1z"),c(f,"class","stat-number svelte-195id1z"),c(_,"class","stat-card svelte-195id1z"),c(y,"class","stat-number svelte-195id1z"),c($,"class","stat-card svelte-195id1z"),c(e,"class","stats-grid svelte-195id1z"),c(j,"class","svelte-195id1z"),c(X,"class","recent-books-grid svelte-195id1z"),c(F,"class","recent-books-section svelte-195id1z"),c(_e,"class","icon svelte-195id1z"),c(de,"class","text"),c(Z,"href",ct+"/biblioteca"),c(Z,"class","action-card svelte-195id1z"),c(he,"class","icon svelte-195id1z"),c(ve,"class","text"),c(Q,"href",ct+"/settings"),c(Q,"class","action-card svelte-195id1z"),c(K,"class","actions-grid svelte-195id1z"),c(Y,"class","quick-actions svelte-195id1z")},m(N,C){O(N,e,C),r(e,l),r(l,t),r(t,s),r(l,a),r(l,o),r(o,v),r(e,h),r(e,_),r(_,p),r(p,n),r(_,z),r(_,f),r(f,L),r(e,D),r(e,$),r($,M),r(M,q),r($,B),r($,y),r(y,I),O(N,T,C),O(N,F,C),r(F,j),r(j,fe),r(F,W),r(F,X),x[S].m(X,null),O(N,le,C),O(N,Y,C),r(Y,me),r(me,Pe),r(Y,Ve),r(Y,K),r(K,Z),r(Z,_e),ce(se,_e,null),r(Z,Te),r(Z,de),r(de,Ce),r(K,Se),r(K,Q),r(Q,he),ce(ae,he,null),r(Q,He),r(Q,ve),r(ve,Re),r(K,Ue),H&&H.m(K,null),re=!0},p(N,C){(!re||C&16)&&d!==(d=N[4].totalBooks+"")&&oe(v,d),(!re||C&16)&&k!==(k=N[4].booksRead+"")&&oe(L,k),(!re||C&16)&&E!==(E=N[4].unread+"")&&oe(I,E);let ee=S;S=Fe(N),S===ee?x[S].p(N,C):(ke(),U(x[ee],1,1,()=>{x[ee]=null}),ge(),G=x[S],G?G.p(N,C):(G=x[S]=Ge[S](N),G.c()),R(G,1),G.m(X,null)),N[3]===2?H?(H.p(N,C),C&8&&R(H,1)):(H=dt(N),H.c(),R(H,1),H.m(K,null)):H&&(ke(),U(H,1,1,()=>{H=null}),ge())},i(N){re||(R(G),R(se.$$.fragment,N),R(ae.$$.fragment,N),R(H),re=!0)},o(N){U(G),U(se.$$.fragment,N),U(ae.$$.fragment,N),U(H),re=!1},d(N){N&&u(e),N&&u(T),N&&u(F),x[S].d(),N&&u(le),N&&u(Y),ue(se),ue(ae),H&&H.d()}}}function Zt(i){let e,l;return e=new Bt({}),{c(){ne(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,s){ce(e,t,s),l=!0},p:J,i(t){l||(R(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Qt(i){let e,l;return{c(){e=m("p"),l=w("Nessun libro nella tua biblioteca"),this.h()},l(t){e=g(t,"P",{class:!0});var s=b(e);l=A(s,"Nessun libro nella tua biblioteca"),s.forEach(u),this.h()},h(){c(e,"class","no-books")},m(t,s){O(t,e,s),r(e,l)},p:J,i:J,o:J,d(t){t&&u(e)}}}function Wt(i){let e,l=i[1],t=[];for(let s=0;s<l.length;s+=1)t[s]=_t(ft(i,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=Le()},l(s){for(let a=0;a<t.length;a+=1)t[a].l(s);e=Le()},m(s,a){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,a);O(s,e,a)},p(s,a){if(a&2){l=s[1];let o;for(o=0;o<l.length;o+=1){const d=ft(s,l,o);t[o]?t[o].p(d,a):(t[o]=_t(d),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},i:J,o:J,d(s){zt(t,s),s&&u(e)}}}function _t(i){let e,l,t,s,a,o,d,v,h=i[25].title+"",_,p,n,z,f=i[25].author+"",k,L;return{c(){e=m("div"),l=m("div"),t=m("img"),o=P(),d=m("div"),v=m("h3"),_=w(h),p=P(),n=m("p"),z=w("di "),k=w(f),L=P(),this.h()},l(D){e=g(D,"DIV",{class:!0});var $=b(e);l=g($,"DIV",{class:!0});var M=b(l);t=g(M,"IMG",{class:!0,src:!0,alt:!0}),M.forEach(u),o=V($),d=g($,"DIV",{class:!0});var q=b(d);v=g(q,"H3",{class:!0});var B=b(v);_=A(B,h),B.forEach(u),p=V(q),n=g(q,"P",{class:!0});var y=b(n);z=A(y,"di "),k=A(y,f),y.forEach(u),q.forEach(u),L=V($),$.forEach(u),this.h()},h(){c(t,"class","book-cover svelte-195id1z"),ot(t.src,s=i[25].cover)||c(t,"src",s),c(t,"alt",a=`Copertina di ${i[25].title}`),c(l,"class","book-cover-container svelte-195id1z"),c(v,"class","svelte-195id1z"),c(n,"class","author svelte-195id1z"),c(d,"class","book-details svelte-195id1z"),c(e,"class","recent-book-card svelte-195id1z")},m(D,$){O(D,e,$),r(e,l),r(l,t),r(e,o),r(e,d),r(d,v),r(v,_),r(d,p),r(d,n),r(n,z),r(n,k),r(e,L)},p(D,$){$&2&&!ot(t.src,s=D[25].cover)&&c(t,"src",s),$&2&&a!==(a=`Copertina di ${D[25].title}`)&&c(t,"alt",a),$&2&&h!==(h=D[25].title+"")&&oe(_,h),$&2&&f!==(f=D[25].author+"")&&oe(k,f)},d(D){D&&u(e)}}}function dt(i){let e,l,t,s,a,o,d;const v=[el,xt],h=[];function _(f,k){return f[5]?1:0}e=_(i),l=h[e]=v[e](i);const p=[ll,tl],n=[];function z(f,k){return f[6]?1:0}return s=z(i),a=n[s]=p[s](i),{c(){l.c(),t=P(),a.c(),o=Le()},l(f){l.l(f),t=V(f),a.l(f),o=Le()},m(f,k){h[e].m(f,k),O(f,t,k),n[s].m(f,k),O(f,o,k),d=!0},p(f,k){let L=e;e=_(f),e===L?h[e].p(f,k):(ke(),U(h[L],1,1,()=>{h[L]=null}),ge(),l=h[e],l?l.p(f,k):(l=h[e]=v[e](f),l.c()),R(l,1),l.m(t.parentNode,t));let D=s;s=z(f),s===D?n[s].p(f,k):(ke(),U(n[D],1,1,()=>{n[D]=null}),ge(),a=n[s],a?a.p(f,k):(a=n[s]=p[s](f),a.c()),R(a,1),a.m(o.parentNode,o))},i(f){d||(R(l),R(a),d=!0)},o(f){U(l),U(a),d=!1},d(f){h[e].d(f),f&&u(t),n[s].d(f),f&&u(o)}}}function xt(i){let e,l,t,s,a,o,d,v=i[7],h=[];for(let _=0;_<v.length;_+=1)h[_]=ht(ut(i,v,_));return{c(){e=m("div"),l=m("select");for(let _=0;_<h.length;_+=1)h[_].c();t=P(),s=m("button"),a=w("Annulla"),this.h()},l(_){e=g(_,"DIV",{class:!0});var p=b(e);l=g(p,"SELECT",{name:!0,class:!0});var n=b(l);for(let f=0;f<h.length;f+=1)h[f].l(n);n.forEach(u),t=V(p),s=g(p,"BUTTON",{class:!0});var z=b(s);a=A(z,"Annulla"),z.forEach(u),p.forEach(u),this.h()},h(){c(l,"name","Library"),c(l,"class","library-select svelte-195id1z"),i[0]===void 0&&Dt(()=>i[16].call(l)),c(s,"class","annulla svelte-195id1z"),c(e,"class","action-card svelte-195id1z")},m(_,p){O(_,e,p),r(e,l);for(let n=0;n<h.length;n+=1)h[n]&&h[n].m(l,null);nt(l,i[0],!0),r(e,t),r(e,s),r(s,a),o||(d=[te(l,"change",i[16]),te(l,"change",i[17]),te(s,"click",i[12])],o=!0)},p(_,p){if(p&128){v=_[7];let n;for(n=0;n<v.length;n+=1){const z=ut(_,v,n);h[n]?h[n].p(z,p):(h[n]=ht(z),h[n].c(),h[n].m(l,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=v.length}p&129&&nt(l,_[0])},i:J,o:J,d(_){_&&u(e),zt(h,_),o=!1,Et(d)}}}function el(i){let e,l,t,s,a,o,d,v,h,_;return t=new qt({}),{c(){e=m("button"),l=m("span"),ne(t.$$.fragment),s=P(),a=m("span"),o=w("Cambia Biblioteca"),this.h()},l(p){e=g(p,"BUTTON",{class:!0});var n=b(e);l=g(n,"SPAN",{class:!0});var z=b(l);ie(t.$$.fragment,z),z.forEach(u),s=V(n),a=g(n,"SPAN",{class:!0});var f=b(a);o=A(f,"Cambia Biblioteca"),f.forEach(u),n.forEach(u),this.h()},h(){c(l,"class","icon svelte-195id1z"),c(a,"class","text"),c(e,"class",d="action-card "+(i[5]?"select-active":"")+" svelte-195id1z")},m(p,n){O(p,e,n),r(e,l),ce(t,l,null),r(e,s),r(e,a),r(a,o),v=!0,h||(_=te(e,"click",i[13]),h=!0)},p(p,n){(!v||n&32&&d!==(d="action-card "+(p[5]?"select-active":"")+" svelte-195id1z"))&&c(e,"class",d)},i(p){v||(R(t.$$.fragment,p),v=!0)},o(p){U(t.$$.fragment,p),v=!1},d(p){p&&u(e),ue(t),h=!1,_()}}}function ht(i){let e,l=i[22].replace("_"," ")+"",t,s;return{c(){e=m("option"),t=w(l),this.h()},l(a){e=g(a,"OPTION",{});var o=b(e);t=A(o,l),o.forEach(u),this.h()},h(){e.__value=s=i[22],e.value=e.__value},m(a,o){O(a,e,o),r(e,t)},p(a,o){o&128&&l!==(l=a[22].replace("_"," ")+"")&&oe(t,l),o&128&&s!==(s=a[22])&&(e.__value=s,e.value=e.__value)},d(a){a&&u(e)}}}function tl(i){let e,l,t,s,a,o,d,v,h,_,p;return{c(){e=m("div"),l=m("input"),t=P(),s=m("div"),a=m("button"),o=w("crea"),d=P(),v=m("button"),h=w("Annulla"),this.h()},l(n){e=g(n,"DIV",{class:!0});var z=b(e);l=g(z,"INPUT",{type:!0,name:!0,class:!0}),t=V(z),s=g(z,"DIV",{class:!0});var f=b(s);a=g(f,"BUTTON",{class:!0});var k=b(a);o=A(k,"crea"),k.forEach(u),d=V(f),v=g(f,"BUTTON",{class:!0});var L=b(v);h=A(L,"Annulla"),L.forEach(u),f.forEach(u),z.forEach(u),this.h()},h(){c(l,"type","text"),c(l,"name","library-name"),c(l,"class","library-select svelte-195id1z"),c(a,"class","svelte-195id1z"),c(v,"class","annulla svelte-195id1z"),c(s,"class","buttons svelte-195id1z"),c(e,"class","action-card svelte-195id1z")},m(n,z){O(n,e,z),r(e,l),it(l,i[8]),r(e,t),r(e,s),r(s,a),r(a,o),r(s,d),r(s,v),r(v,h),_||(p=[te(l,"input",i[18]),te(a,"click",i[19]),te(v,"click",i[14])],_=!0)},p(n,z){z&256&&l.value!==n[8]&&it(l,n[8])},i:J,o:J,d(n){n&&u(e),_=!1,Et(p)}}}function ll(i){let e,l,t,s,a,o,d,v,h;return t=new St({}),{c(){e=m("button"),l=m("span"),ne(t.$$.fragment),s=P(),a=m("span"),o=w("Crea Nuova biblioteca"),this.h()},l(_){e=g(_,"BUTTON",{class:!0});var p=b(e);l=g(p,"SPAN",{class:!0});var n=b(l);ie(t.$$.fragment,n),n.forEach(u),s=V(p),a=g(p,"SPAN",{class:!0});var z=b(a);o=A(z,"Crea Nuova biblioteca"),z.forEach(u),p.forEach(u),this.h()},h(){c(l,"class","icon svelte-195id1z"),c(a,"class","text"),c(e,"class","action-card svelte-195id1z")},m(_,p){O(_,e,p),r(e,l),ce(t,l,null),r(e,s),r(e,a),r(a,o),d=!0,v||(h=te(e,"click",i[15]),v=!0)},p:J,i(_){d||(R(t.$$.fragment,_),d=!0)},o(_){U(t.$$.fragment,_),d=!1},d(_){_&&u(e),ue(t),v=!1,h()}}}function sl(i){var q;let e,l,t,s=i[11]()+"",a,o,d=(((q=i[9])==null?void 0:q.displayName)||"Lettore")+"",v,h,_,p,n,z,f,k,L;const D=[Yt,Xt],$=[];function M(B,y){return B[0]||B[3]===2?0:1}return f=M(i),k=$[f]=D[f](i),{c(){e=m("div"),l=m("div"),t=m("h2"),a=w(s),o=w(", "),v=w(d),h=w("!"),_=P(),p=m("p"),n=w("Benvenuto nella tua biblioteca personale"),z=P(),k.c(),this.h()},l(B){e=g(B,"DIV",{class:!0});var y=b(e);l=g(y,"DIV",{class:!0});var E=b(l);t=g(E,"H2",{class:!0});var I=b(t);a=A(I,s),o=A(I,", "),v=A(I,d),h=A(I,"!"),I.forEach(u),_=V(E),p=g(E,"P",{});var T=b(p);n=A(T,"Benvenuto nella tua biblioteca personale"),T.forEach(u),E.forEach(u),z=V(y),k.l(y),y.forEach(u),this.h()},h(){c(t,"class","svelte-195id1z"),c(l,"class","welcome-section svelte-195id1z"),c(e,"class","content svelte-195id1z")},m(B,y){O(B,e,y),r(e,l),r(l,t),r(t,a),r(t,o),r(t,v),r(t,h),r(l,_),r(l,p),r(p,n),r(e,z),$[f].m(e,null),L=!0},p(B,[y]){var I;(!L||y&512)&&d!==(d=(((I=B[9])==null?void 0:I.displayName)||"Lettore")+"")&&oe(v,d);let E=f;f=M(B),f===E?$[f].p(B,y):(ke(),U($[E],1,1,()=>{$[E]=null}),ge(),k=$[f],k?k.p(B,y):(k=$[f]=D[f](B),k.c()),R(k,1),k.m(e,null))},i(B){L||(R(k),L=!0)},o(B){U(k),L=!1},d(B){B&&u(e),$[f].d()}}}function al(i,e,l){let t,s;rt(i,Me,E=>l(0,t=E)),rt(i,Lt,E=>l(9,s=E));let a=[],o=!0,d,v={totalBooks:0,booksRead:0,unread:0},h=!1,_=!1,p=[],n="";$t(async()=>{It.set(!1),yt.set(await Pt(s.uid).then(E=>l(3,d=E))),await Ie(`users/${s.uid}/biblioteca`).then(async E=>{wt(Me,t=E,t),console.log(E),await Ie(`protectedData/${E}`).then(I=>{console.log("DATAfrom db:",I),l(1,a=I.slice(0,3)),l(4,v.totalBooks=I.length,v),l(4,v.booksRead=I.filter(T=>T.read).length,v),l(4,v.unread=I.filter(T=>!T.read).length,v),l(2,o=!1)})}),console.log(s.uid),console.log("role:",d),console.log("Lib:",t)});const z=async E=>{await Ie(`protectedData/${E}`).then(I=>{console.log("DATAfrom db:",I),l(1,a=I.slice(0,3)),l(4,v.totalBooks=I.length,v),l(4,v.booksRead=I.filter(T=>T.read).length,v),l(4,v.unread=I.filter(T=>!T.read).length,v),l(2,o=!1)})},f=()=>{const E=new Date().getHours();return E<12?"Buongiorno":E<18?"Buon pomeriggio":"Buonasera"},k=()=>l(5,h=!h),L=async()=>{l(7,p=await Vt()),await Ie(`protectedData/${t}`),k()},D=()=>l(6,_=!_),$=()=>{D()};function M(){t=At(this),Me.set(t),l(7,p)}const q=async()=>{await Tt(`users/${s.uid}/`,{biblioteca:`${t}`}),await z(t),l(5,h=!1)};function B(){n=this.value,l(8,n)}const y=async()=>{if(n){console.log("newLibName",n);try{await Ct(n.replace(" ","_")),await z(t)}catch(E){console.error("Error:",E)}finally{l(6,_=!1)}}};return i.$$.update=()=>{i.$$.dirty&1&&console.log(t)},[t,a,o,d,v,h,_,p,n,s,z,f,k,L,D,$,M,q,B,y]}class dl extends Oe{constructor(e){super(),qe(this,e,al,sl,je,{})}}export{dl as component};
