import{S as Re,i as qe,s as Ge,k as v,l as d,m as h,h as a,n as o,R as Xe,b as M,E as c,v as be,d as F,f as me,g as O,T as s1,q as z,a as P,r as V,c as A,N as U,F as G,G as le,O as r1,y as ke,z as Le,A as Ce,B as ge,C as W,D as Y,e as de,H as je,o as o1,w as Ve,U as Se,V as Oe,Q as a1,I as Je,u as Ke}from"../chunks/index.6078c922.js";import{u as n1,i as i1,f as We,P as u1,S as c1,d as f1}from"../chunks/sideBar.272b82d8.js";import{S as p1,s as _1}from"../chunks/utilsStore.d3778e29.js";import{u as v1}from"../chunks/authStore.83847f9a.js";function d1(u){let l,e,t,s,r,i,L,m,k,f,g,_,Z,D,S,C,E,I,T,y,B,p,w,b,H,R,ae,Q,oe,X,re,J,q,x,pe,j,ne,$,_e,te,ie,ee,ve,se,ue,K,ce,ye,Ie,fe,Be,Ne,He;return{c(){l=v("h2"),e=z("Modifica libro"),t=P(),s=v("label"),r=z(`Titolo:\r
                `),i=v("input"),L=P(),m=v("label"),k=z(`Autore:\r
                `),f=v("input"),g=P(),_=v("input"),Z=P(),D=v("label"),S=z(`Editore:\r
                `),C=v("input"),E=P(),I=v("label"),T=z(`Luogo:\r
                `),y=v("input"),B=P(),p=v("label"),w=z(`Anno:\r
                `),b=v("input"),H=P(),R=v("label"),ae=z(`Genere:\r
                `),Q=v("input"),oe=P(),X=v("label"),re=z(`Commenti:\r
                `),J=v("textarea"),q=P(),x=v("label"),pe=z(`Copertina:\r
                `),j=v("input"),ne=P(),$=v("label"),_e=z(`Letto:\r
                `),te=v("input"),ie=P(),ee=v("label"),ve=z(`Prestito:\r
                `),se=v("input"),ue=P(),K=v("div"),ce=v("button"),ye=z("Annulla"),Ie=P(),fe=v("button"),Be=z("Salva"),this.h()},l(n){l=d(n,"H2",{});var N=h(l);e=V(N,"Modifica libro"),N.forEach(a),t=A(n),s=d(n,"LABEL",{class:!0});var Me=h(s);r=V(Me,`Titolo:\r
                `),i=d(Me,"INPUT",{type:!0,class:!0}),Me.forEach(a),L=A(n),m=d(n,"LABEL",{class:!0});var he=h(m);k=V(he,`Autore:\r
                `),f=d(he,"INPUT",{type:!0,placeholder:!0,class:!0}),g=A(he),_=d(he,"INPUT",{type:!0,placeholder:!0,class:!0}),he.forEach(a),Z=A(n),D=d(n,"LABEL",{class:!0});var we=h(D);S=V(we,`Editore:\r
                `),C=d(we,"INPUT",{type:!0,class:!0}),we.forEach(a),E=A(n),I=d(n,"LABEL",{class:!0});var Te=h(I);T=V(Te,`Luogo:\r
                `),y=d(Te,"INPUT",{type:!0,class:!0}),Te.forEach(a),B=A(n),p=d(n,"LABEL",{class:!0});var De=h(p);w=V(De,`Anno:\r
                `),b=d(De,"INPUT",{type:!0}),De.forEach(a),H=A(n),R=d(n,"LABEL",{class:!0});var Ze=h(R);ae=V(Ze,`Genere:\r
                `),Q=d(Ze,"INPUT",{type:!0,class:!0}),Ze.forEach(a),oe=A(n),X=d(n,"LABEL",{class:!0});var Pe=h(X);re=V(Pe,`Commenti:\r
                `),J=d(Pe,"TEXTAREA",{class:!0}),h(J).forEach(a),Pe.forEach(a),q=A(n),x=d(n,"LABEL",{class:!0});var Ae=h(x);pe=V(Ae,`Copertina:\r
                `),j=d(Ae,"INPUT",{type:!0,placeholder:!0,class:!0}),Ae.forEach(a),ne=A(n),$=d(n,"LABEL",{class:!0});var Ue=h($);_e=V(Ue,`Letto:\r
                `),te=d(Ue,"INPUT",{type:!0}),Ue.forEach(a),ie=A(n),ee=d(n,"LABEL",{class:!0});var ze=h(ee);ve=V(ze,`Prestito:\r
                `),se=d(ze,"INPUT",{type:!0}),ze.forEach(a),ue=A(n),K=d(n,"DIV",{class:!0});var Ee=h(K);ce=d(Ee,"BUTTON",{class:!0});var Qe=h(ce);ye=V(Qe,"Annulla"),Qe.forEach(a),Ie=A(Ee),fe=d(Ee,"BUTTON",{class:!0});var Fe=h(fe);Be=V(Fe,"Salva"),Fe.forEach(a),Ee.forEach(a),this.h()},h(){o(i,"type","text"),o(i,"class","svelte-115gks2"),o(s,"class","svelte-115gks2"),o(f,"type","text"),o(f,"placeholder","Nome"),o(f,"class","svelte-115gks2"),o(_,"type","text"),o(_,"placeholder","Cognome"),o(_,"class","svelte-115gks2"),o(m,"class","svelte-115gks2"),o(C,"type","text"),o(C,"class","svelte-115gks2"),o(D,"class","svelte-115gks2"),o(y,"type","text"),o(y,"class","svelte-115gks2"),o(I,"class","svelte-115gks2"),o(b,"type","number"),o(p,"class","svelte-115gks2"),o(Q,"type","text"),o(Q,"class","svelte-115gks2"),o(R,"class","svelte-115gks2"),o(J,"class","svelte-115gks2"),o(X,"class","svelte-115gks2"),o(j,"type","text"),o(j,"placeholder","Incolla il link del immagine di copertina"),o(j,"class","svelte-115gks2"),o(x,"class","svelte-115gks2"),o(te,"type","checkbox"),o($,"class","svelte-115gks2"),o(se,"type","checkbox"),o(ee,"class","svelte-115gks2"),o(ce,"class","discard svelte-115gks2"),o(fe,"class","svelte-115gks2"),o(K,"class","buttons svelte-115gks2")},m(n,N){M(n,l,N),c(l,e),M(n,t,N),M(n,s,N),c(s,r),c(s,i),U(i,u[1].title),M(n,L,N),M(n,m,N),c(m,k),c(m,f),U(f,u[1].authorName),c(m,g),c(m,_),U(_,u[1].authorSurname),M(n,Z,N),M(n,D,N),c(D,S),c(D,C),U(C,u[1].editor),M(n,E,N),M(n,I,N),c(I,T),c(I,y),U(y,u[1].place),M(n,B,N),M(n,p,N),c(p,w),c(p,b),U(b,u[1].year),M(n,H,N),M(n,R,N),c(R,ae),c(R,Q),U(Q,u[1].genre),M(n,oe,N),M(n,X,N),c(X,re),c(X,J),U(J,u[1].comments),M(n,q,N),M(n,x,N),c(x,pe),c(x,j),U(j,u[1].cover),M(n,ne,N),M(n,$,N),c($,_e),c($,te),te.checked=u[1].read,M(n,ie,N),M(n,ee,N),c(ee,ve),c(ee,se),se.checked=u[1].loaned,M(n,ue,N),M(n,K,N),c(K,ce),c(ce,ye),c(K,Ie),c(K,fe),c(fe,Be),Ne||(He=[G(i,"input",u[6]),G(f,"input",u[7]),G(_,"input",u[8]),G(C,"input",u[9]),G(y,"input",u[10]),G(b,"input",u[11]),G(Q,"input",u[12]),G(J,"input",u[13]),G(j,"input",u[14]),G(te,"change",u[15]),G(se,"change",u[16]),G(ce,"click",u[4]),G(fe,"click",u[3])],Ne=!0)},p(n,N){N&2&&i.value!==n[1].title&&U(i,n[1].title),N&2&&f.value!==n[1].authorName&&U(f,n[1].authorName),N&2&&_.value!==n[1].authorSurname&&U(_,n[1].authorSurname),N&2&&C.value!==n[1].editor&&U(C,n[1].editor),N&2&&y.value!==n[1].place&&U(y,n[1].place),N&2&&s1(b.value)!==n[1].year&&U(b,n[1].year),N&2&&Q.value!==n[1].genre&&U(Q,n[1].genre),N&2&&U(J,n[1].comments),N&2&&j.value!==n[1].cover&&U(j,n[1].cover),N&2&&(te.checked=n[1].read),N&2&&(se.checked=n[1].loaned)},i:le,o:le,d(n){n&&a(l),n&&a(t),n&&a(s),n&&a(L),n&&a(m),n&&a(Z),n&&a(D),n&&a(E),n&&a(I),n&&a(B),n&&a(p),n&&a(H),n&&a(R),n&&a(oe),n&&a(X),n&&a(q),n&&a(x),n&&a(ne),n&&a($),n&&a(ie),n&&a(ee),n&&a(ue),n&&a(K),Ne=!1,r1(He)}}}function h1(u){let l,e,t;return e=new p1({}),{c(){l=v("div"),ke(e.$$.fragment),this.h()},l(s){l=d(s,"DIV",{class:!0});var r=h(l);Le(e.$$.fragment,r),r.forEach(a),this.h()},h(){o(l,"class","loader svelte-115gks2")},m(s,r){M(s,l,r),Ce(e,l,null),t=!0},p:le,i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){F(e.$$.fragment,s),t=!1},d(s){s&&a(l),ge(e)}}}function b1(u){let l,e,t,s,r,i;const L=[h1,d1],m=[];function k(f,g){return f[2]?0:1}return t=k(u),s=m[t]=L[t](u),{c(){l=v("div"),e=v("div"),s.c(),this.h()},l(f){l=d(f,"DIV",{class:!0});var g=h(l);e=d(g,"DIV",{class:!0});var _=h(e);s.l(_),_.forEach(a),g.forEach(a),this.h()},h(){o(e,"class","pop-up svelte-115gks2"),o(l,"class",r=Xe(u[0]?"hidden":"overlay")+" svelte-115gks2")},m(f,g){M(f,l,g),c(l,e),m[t].m(e,null),i=!0},p(f,[g]){let _=t;t=k(f),t===_?m[t].p(f,g):(be(),F(m[_],1,1,()=>{m[_]=null}),me(),s=m[t],s?s.p(f,g):(s=m[t]=L[t](f),s.c()),O(s,1),s.m(e,null)),(!i||g&1&&r!==(r=Xe(f[0]?"hidden":"overlay")+" svelte-115gks2"))&&o(l,"class",r)},i(f){i||(O(s),i=!0)},o(f){F(s),i=!1},d(f){f&&a(l),m[t].d()}}}function m1(u,l,e){let{hidden:t=!0}=l,{length:s}=l,{book:r={title:"",authorName:"",authorSurname:"",editor:"",place:"",year:"",genre:"",comments:"",read:!1,loaned:!1}}=l,i=!1;async function L(){e(2,i=!0),e(5,s=r.id??s),await n1(`protectedData/books/${s}`,{...r,id:s}).then(()=>{e(2,i=!1),e(0,t=!0)}).then(()=>window.location.reload()).catch(()=>{e(2,i=!1),e(1,r={title:"",authorName:"",authorSurname:"",editor:"",year:"",place:"",genre:"",comments:"",read:!1,loaned:!1})})}function m(){e(0,t=!0),e(1,r={title:"",authorName:"",authorSurname:"",editor:"",year:"",place:"",genre:"",comments:"",read:!1,loaned:!1})}function k(){r.title=this.value,e(1,r)}function f(){r.authorName=this.value,e(1,r)}function g(){r.authorSurname=this.value,e(1,r)}function _(){r.editor=this.value,e(1,r)}function Z(){r.place=this.value,e(1,r)}function D(){r.year=s1(this.value),e(1,r)}function S(){r.genre=this.value,e(1,r)}function C(){r.comments=this.value,e(1,r)}function E(){r.cover=this.value,e(1,r)}function I(){r.read=this.checked,e(1,r)}function T(){r.loaned=this.checked,e(1,r)}return u.$$set=y=>{"hidden"in y&&e(0,t=y.hidden),"length"in y&&e(5,s=y.length),"book"in y&&e(1,r=y.book)},[t,r,i,L,m,s,k,f,g,_,Z,D,S,C,E,I,T]}class k1 extends Re{constructor(l){super(),qe(this,l,m1,b1,Ge,{hidden:0,length:5,book:1})}}function L1(u){let l,e,t,s,r,i,L,m,k,f,g,_,Z,D,S,C,E,I,T,y,B,p,w,b,H,R,ae,Q,oe;return{c(){l=v("div"),e=v("div"),t=v("ul"),s=v("li"),r=W("svg"),i=W("path"),L=P(),m=v("li"),k=W("svg"),f=W("path"),g=P(),_=v("li"),Z=W("svg"),D=W("path"),S=P(),C=v("li"),E=W("svg"),I=W("path"),T=P(),y=v("li"),B=W("svg"),p=W("path"),w=P(),b=v("li"),H=W("svg"),R=W("path"),ae=P(),Q=v("span"),oe=z("Loading"),this.h()},l(X){l=d(X,"DIV",{class:!0});var re=h(l);e=d(re,"DIV",{class:!0});var J=h(e);t=d(J,"UL",{class:!0});var q=h(t);s=d(q,"LI",{class:!0});var x=h(s);r=Y(x,"svg",{fill:!0,viewBox:!0,class:!0});var pe=h(r);i=Y(pe,"path",{d:!0}),h(i).forEach(a),pe.forEach(a),x.forEach(a),L=A(q),m=d(q,"LI",{class:!0});var j=h(m);k=Y(j,"svg",{fill:!0,viewBox:!0,class:!0});var ne=h(k);f=Y(ne,"path",{d:!0}),h(f).forEach(a),ne.forEach(a),j.forEach(a),g=A(q),_=d(q,"LI",{class:!0});var $=h(_);Z=Y($,"svg",{fill:!0,viewBox:!0,class:!0});var _e=h(Z);D=Y(_e,"path",{d:!0}),h(D).forEach(a),_e.forEach(a),$.forEach(a),S=A(q),C=d(q,"LI",{class:!0});var te=h(C);E=Y(te,"svg",{fill:!0,viewBox:!0,class:!0});var ie=h(E);I=Y(ie,"path",{d:!0}),h(I).forEach(a),ie.forEach(a),te.forEach(a),T=A(q),y=d(q,"LI",{class:!0});var ee=h(y);B=Y(ee,"svg",{fill:!0,viewBox:!0,class:!0});var ve=h(B);p=Y(ve,"path",{d:!0}),h(p).forEach(a),ve.forEach(a),ee.forEach(a),w=A(q),b=d(q,"LI",{class:!0});var se=h(b);H=Y(se,"svg",{fill:!0,viewBox:!0,class:!0});var ue=h(H);R=Y(ue,"path",{d:!0}),h(R).forEach(a),ue.forEach(a),se.forEach(a),q.forEach(a),ae=A(J),J.forEach(a),Q=d(re,"SPAN",{class:!0});var K=h(Q);oe=V(K,"Loading"),K.forEach(a),re.forEach(a),this.h()},h(){o(i,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),o(r,"fill","currentColor"),o(r,"viewBox","0 0 90 120"),o(r,"class","svelte-1lyp77k"),o(s,"class","svelte-1lyp77k"),o(f,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),o(k,"fill","currentColor"),o(k,"viewBox","0 0 90 120"),o(k,"class","svelte-1lyp77k"),o(m,"class","svelte-1lyp77k"),o(D,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),o(Z,"fill","currentColor"),o(Z,"viewBox","0 0 90 120"),o(Z,"class","svelte-1lyp77k"),o(_,"class","svelte-1lyp77k"),o(I,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),o(E,"fill","currentColor"),o(E,"viewBox","0 0 90 120"),o(E,"class","svelte-1lyp77k"),o(C,"class","svelte-1lyp77k"),o(p,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),o(B,"fill","currentColor"),o(B,"viewBox","0 0 90 120"),o(B,"class","svelte-1lyp77k"),o(y,"class","svelte-1lyp77k"),o(R,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),o(H,"fill","currentColor"),o(H,"viewBox","0 0 90 120"),o(H,"class","svelte-1lyp77k"),o(b,"class","svelte-1lyp77k"),o(t,"class","svelte-1lyp77k"),o(e,"class","svelte-1lyp77k"),o(Q,"class","svelte-1lyp77k"),o(l,"class","loader svelte-1lyp77k")},m(X,re){M(X,l,re),c(l,e),c(e,t),c(t,s),c(s,r),c(r,i),c(t,L),c(t,m),c(m,k),c(k,f),c(t,g),c(t,_),c(_,Z),c(Z,D),c(t,S),c(t,C),c(C,E),c(E,I),c(t,T),c(t,y),c(y,B),c(B,p),c(t,w),c(t,b),c(b,H),c(H,R),c(e,ae),c(l,Q),c(Q,oe)},p:le,i:le,o:le,d(X){X&&a(l)}}}class C1 extends Re{constructor(l){super(),qe(this,l,null,L1,Ge,{})}}function Ye(u,l,e){const t=u.slice();return t[21]=l[e],t}function xe(u){let l,e,t,s,r;return e=new u1({props:{size:"40"}}),{c(){l=v("button"),ke(e.$$.fragment),this.h()},l(i){l=d(i,"BUTTON",{class:!0});var L=h(l);Le(e.$$.fragment,L),L.forEach(a),this.h()},h(){o(l,"class","add-book-button svelte-1tzvpxd")},m(i,L){M(i,l,L),Ce(e,l,null),t=!0,s||(r=G(l,"click",u[8]),s=!0)},p:le,i(i){t||(O(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){i&&a(l),ge(e),s=!1,r()}}}function $e(u){let l,e,t,s,r;function i(f){u[11](f)}function L(f){u[12](f)}function m(f){u[13](f)}let k={};return u[2]!==void 0&&(k.hidden=u[2]),u[3]!==void 0&&(k.book=u[3]),u[1].length!==void 0&&(k.length=u[1].length),l=new k1({props:k}),Ve.push(()=>Se(l,"hidden",i)),Ve.push(()=>Se(l,"book",L)),Ve.push(()=>Se(l,"length",m)),{c(){ke(l.$$.fragment)},l(f){Le(l.$$.fragment,f)},m(f,g){Ce(l,f,g),r=!0},p(f,g){const _={};!e&&g&4&&(e=!0,_.hidden=f[2],Oe(()=>e=!1)),!t&&g&8&&(t=!0,_.book=f[3],Oe(()=>t=!1)),!s&&g&2&&(s=!0,_.length=f[1].length,Oe(()=>s=!1)),l.$set(_)},i(f){r||(O(l.$$.fragment,f),r=!0)},o(f){F(l.$$.fragment,f),r=!1},d(f){ge(l,f)}}}function g1(u){let l,e,t;return e=new C1({}),{c(){l=v("div"),ke(e.$$.fragment),this.h()},l(s){l=d(s,"DIV",{class:!0});var r=h(l);Le(e.$$.fragment,r),r.forEach(a),this.h()},h(){o(l,"class","loader-container svelte-1tzvpxd")},m(s,r){M(s,l,r),Ce(e,l,null),t=!0},p:le,i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){F(e.$$.fragment,s),t=!1},d(s){s&&a(l),ge(e)}}}function E1(u){let l;function e(r,i){return r[5].length>0?I1:y1}let t=e(u),s=t(u);return{c(){s.c(),l=de()},l(r){s.l(r),l=de()},m(r,i){s.m(r,i),M(r,l,i)},p(r,i){t===(t=e(r))&&s?s.p(r,i):(s.d(1),s=t(r),s&&(s.c(),s.m(l.parentNode,l)))},i:le,o:le,d(r){s.d(r),r&&a(l)}}}function y1(u){let l,e,t;return{c(){l=v("div"),e=v("p"),t=z("Nessun libro trovato"),this.h()},l(s){l=d(s,"DIV",{class:!0});var r=h(l);e=d(r,"P",{});var i=h(e);t=V(i,"Nessun libro trovato"),i.forEach(a),r.forEach(a),this.h()},h(){o(l,"class","no-books svelte-1tzvpxd")},m(s,r){M(s,l,r),c(l,e),c(e,t)},p:le,d(s){s&&a(l)}}}function I1(u){let l,e=u[5],t=[];for(let s=0;s<e.length;s+=1)t[s]=l1(Ye(u,e,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();l=de()},l(s){for(let r=0;r<t.length;r+=1)t[r].l(s);l=de()},m(s,r){for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(s,r);M(s,l,r)},p(s,r){if(r&1632){e=s[5];let i;for(i=0;i<e.length;i+=1){const L=Ye(s,e,i);t[i]?t[i].p(L,r):(t[i]=l1(L),t[i].c(),t[i].m(l.parentNode,l))}for(;i<t.length;i+=1)t[i].d(1);t.length=e.length}},d(s){a1(t,s),s&&a(l)}}}function e1(u){let l,e,t,s,r,i,L,m;function k(){return u[15](u[21])}function f(){return u[16](u[21])}return{c(){l=v("div"),e=v("button"),t=z("Modifica"),s=P(),r=v("button"),i=z("Rimuovi"),this.h()},l(g){l=d(g,"DIV",{class:!0});var _=h(l);e=d(_,"BUTTON",{class:!0});var Z=h(e);t=V(Z,"Modifica"),Z.forEach(a),s=A(_),r=d(_,"BUTTON",{class:!0});var D=h(r);i=V(D,"Rimuovi"),D.forEach(a),_.forEach(a),this.h()},h(){o(e,"class","svelte-1tzvpxd"),o(r,"class","svelte-1tzvpxd"),o(l,"class","actions svelte-1tzvpxd")},m(g,_){M(g,l,_),c(l,e),c(e,t),c(l,s),c(l,r),c(r,i),L||(m=[G(e,"click",k),G(r,"click",f)],L=!0)},p(g,_){u=g},d(g){g&&a(l),L=!1,r1(m)}}}function l1(u){let l,e,t,s,r,i,L,m,k=u[21].title+"",f,g,_,Z,D=u[21].author+"",S,C,E,I=u[6]&&e1(u);return{c(){l=v("div"),e=v("div"),t=v("img"),i=P(),L=v("div"),m=v("p"),f=z(k),g=P(),_=v("p"),Z=z("di "),S=z(D),C=P(),I&&I.c(),E=P(),this.h()},l(T){l=d(T,"DIV",{class:!0});var y=h(l);e=d(y,"DIV",{class:!0});var B=h(e);t=d(B,"IMG",{class:!0,src:!0,alt:!0}),B.forEach(a),i=A(y),L=d(y,"DIV",{class:!0});var p=h(L);m=d(p,"P",{class:!0});var w=h(m);f=V(w,k),w.forEach(a),g=A(p),_=d(p,"P",{class:!0});var b=h(_);Z=V(b,"di "),S=V(b,D),b.forEach(a),p.forEach(a),C=A(y),I&&I.l(y),E=A(y),y.forEach(a),this.h()},h(){o(t,"class","book-cover svelte-1tzvpxd"),Je(t.src,s=u[21].cover)||o(t,"src",s),o(t,"alt",r=`Copertina di ${u[21].title}`),o(e,"class","cover-container svelte-1tzvpxd"),o(m,"class","book-title svelte-1tzvpxd"),o(_,"class","book-author svelte-1tzvpxd"),o(L,"class","book-info svelte-1tzvpxd"),o(l,"class","book-card svelte-1tzvpxd")},m(T,y){M(T,l,y),c(l,e),c(e,t),c(l,i),c(l,L),c(L,m),c(m,f),c(L,g),c(L,_),c(_,Z),c(_,S),c(l,C),I&&I.m(l,null),c(l,E)},p(T,y){y&32&&!Je(t.src,s=T[21].cover)&&o(t,"src",s),y&32&&r!==(r=`Copertina di ${T[21].title}`)&&o(t,"alt",r),y&32&&k!==(k=T[21].title+"")&&Ke(f,k),y&32&&D!==(D=T[21].author+"")&&Ke(S,D),T[6]?I?I.p(T,y):(I=e1(T),I.c(),I.m(l,E)):I&&(I.d(1),I=null)},d(T){T&&a(l),I&&I.d()}}}function t1(u){let l,e;return l=new c1({}),{c(){ke(l.$$.fragment)},l(t){Le(l.$$.fragment,t)},m(t,s){Ce(l,t,s),e=!0},i(t){e||(O(l.$$.fragment,t),e=!0)},o(t){F(l.$$.fragment,t),e=!1},d(t){ge(l,t)}}}function B1(u){let l,e,t,s,r,i,L,m,k,f,g,_,Z,D,S,C=u[6]&&xe(u),E=!u[2]&&$e(u);const I=[E1,g1],T=[];function y(p,w){return p[4]?1:0}k=y(u),f=T[k]=I[k](u);let B=u[7]&&t1();return{c(){C&&C.c(),l=P(),e=v("div"),E&&E.c(),t=P(),s=v("div"),r=v("div"),i=v("input"),L=P(),m=v("div"),f.c(),g=P(),B&&B.c(),_=de(),this.h()},l(p){C&&C.l(p),l=A(p),e=d(p,"DIV",{class:!0});var w=h(e);E&&E.l(w),t=A(w),s=d(w,"DIV",{class:!0});var b=h(s);r=d(b,"DIV",{class:!0});var H=h(r);i=d(H,"INPUT",{type:!0,placeholder:!0,class:!0}),H.forEach(a),b.forEach(a),L=A(w),m=d(w,"DIV",{class:!0});var R=h(m);f.l(R),R.forEach(a),w.forEach(a),g=A(p),B&&B.l(p),_=de(),this.h()},h(){o(i,"type","text"),o(i,"placeholder","Cerca un libro..."),o(i,"class","svelte-1tzvpxd"),o(r,"class","search-bar svelte-1tzvpxd"),o(s,"class","top-actions svelte-1tzvpxd"),o(m,"class","book-grid svelte-1tzvpxd"),o(e,"class","content svelte-1tzvpxd")},m(p,w){C&&C.m(p,w),M(p,l,w),M(p,e,w),E&&E.m(e,null),c(e,t),c(e,s),c(s,r),c(r,i),U(i,u[0]),c(e,L),c(e,m),T[k].m(m,null),M(p,g,w),B&&B.m(p,w),M(p,_,w),Z=!0,D||(S=G(i,"input",u[14]),D=!0)},p(p,[w]){p[6]?C?(C.p(p,w),w&64&&O(C,1)):(C=xe(p),C.c(),O(C,1),C.m(l.parentNode,l)):C&&(be(),F(C,1,1,()=>{C=null}),me()),p[2]?E&&(be(),F(E,1,1,()=>{E=null}),me()):E?(E.p(p,w),w&4&&O(E,1)):(E=$e(p),E.c(),O(E,1),E.m(e,t)),w&1&&i.value!==p[0]&&U(i,p[0]);let b=k;k=y(p),k===b?T[k].p(p,w):(be(),F(T[b],1,1,()=>{T[b]=null}),me(),f=T[k],f?f.p(p,w):(f=T[k]=I[k](p),f.c()),O(f,1),f.m(m,null)),p[7]?B?w&128&&O(B,1):(B=t1(),B.c(),O(B,1),B.m(_.parentNode,_)):B&&(be(),F(B,1,1,()=>{B=null}),me())},i(p){Z||(O(C),O(E),O(f),O(B),Z=!0)},o(p){F(C),F(E),F(f),F(B),Z=!1},d(p){C&&C.d(p),p&&a(l),p&&a(e),E&&E.d(),T[k].d(),p&&a(g),B&&B.d(p),p&&a(_),D=!1,S()}}}function N1(u,l,e){let t,s;je(u,v1,b=>e(18,t=b)),je(u,_1,b=>e(7,s=b)),o1(async()=>{await D(),g=t.photoURL??"/profile_placeholder.png",e(6,_=await i1(t.uid))});let r=!0,i,L=!0,m="",k=[],f=[],g,_;const Z=b=>{e(3,i=b),e(2,r=!r)},D=()=>{e(4,L=!0),We("protectedData/books").then(b=>{e(1,k=b),e(5,f=b),e(4,L=!1)})},S=()=>{e(2,r=!r)},C=b=>{Z(b)},E=async b=>{e(4,L=!0),await f1(`protectedData/books/${b.id}`).then(()=>{e(4,L=!1),D()})};function I(b){r=b,e(2,r)}function T(b){i=b,e(3,i)}function y(b){u.$$.not_equal(k.length,b)&&(k.length=b,e(1,k))}function B(){m=this.value,e(0,m)}const p=b=>C(b),w=b=>E(b);return u.$$.update=()=>{u.$$.dirty&3&&(m.trim()===""?e(5,f=k):e(5,f=k.filter(b=>b.title.toLowerCase().includes(m.toLowerCase()))))},We("protectedData/books").then(b=>{e(1,k=b),e(5,f=b),e(4,L=!1)}),[m,k,r,i,L,f,_,s,S,C,E,I,T,y,B,p,w]}class Z1 extends Re{constructor(l){super(),qe(this,l,N1,B1,Ge,{})}}export{Z1 as component};
