import{S as Ye,i as We,s as $e,I as Ne,y as ve,z as be,A as ge,J as Fl,K as Xl,g as R,d as j,B as me,L as Ke,M as Jl,N as Kl,O as Ql,P as Yl,k as h,l as _,m as d,h as f,n as i,a1 as dt,b as ee,E as o,v as Oe,f as Re,H as gl,a2 as Pt,a0 as St,q as V,a as C,r as Z,c as y,U as Mt,X as $,_ as ml,F as Y,G as Ce,$ as Wl,Y as kl,u as Qe,C as fe,D as pe,o as Ut,Z as Vt,w as ll,a3 as tl,a4 as sl,e as vt,T as bt,a5 as Zt}from"../chunks/index.d08effdb.js";import{S as Ot}from"../chunks/simpleLoader.fc6986a4.js";import{u as Rt,a as zt,f as gt,d as qt}from"../chunks/db_functions.fe3bdab1.js";import{b as jl,P as Ht}from"../chunks/libStore.6bed4b8f.js";import{k as al,s as Gt,m as mt,u as jt}from"../chunks/authStore.690c0957.js";import{I as $l}from"../chunks/Icon.4dc19c6d.js";function Ft(n){let e;const l=n[2].default,a=Jl(l,n,n[3],null);return{c(){a&&a.c()},l(s){a&&a.l(s)},m(s,t){a&&a.m(s,t),e=!0},p(s,t){a&&a.p&&(!e||t&8)&&Kl(a,l,s,s[3],e?Yl(l,s[3],t,null):Ql(s[3]),null)},i(s){e||(R(a,s),e=!0)},o(s){j(a,s),e=!1},d(s){a&&a.d(s)}}}function Xt(n){let e,l;const a=[{name:"book-open"},n[1],{iconNode:n[0]}];let s={$$slots:{default:[Ft]},$$scope:{ctx:n}};for(let t=0;t<a.length;t+=1)s=Ne(s,a[t]);return e=new $l({props:s}),{c(){ve(e.$$.fragment)},l(t){be(e.$$.fragment,t)},m(t,r){ge(e,t,r),l=!0},p(t,[r]){const c=r&3?Fl(a,[a[0],r&2&&Xl(t[1]),r&1&&{iconNode:t[0]}]):{};r&8&&(c.$$scope={dirty:r,ctx:t}),e.$set(c)},i(t){l||(R(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){me(e,t)}}}function Jt(n,e,l){let{$$slots:a={},$$scope:s}=e;const t=[["path",{d:"M12 7v14"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"}]];return n.$$set=r=>{l(1,e=Ne(Ne({},e),Ke(r))),"$$scope"in r&&l(3,s=r.$$scope)},e=Ke(e),[t,e,a,s]}class Kt extends Ye{constructor(e){super(),We(this,e,Jt,Xt,$e,{})}}const Qt=Kt;function Yt(n){let e;const l=n[2].default,a=Jl(l,n,n[3],null);return{c(){a&&a.c()},l(s){a&&a.l(s)},m(s,t){a&&a.m(s,t),e=!0},p(s,t){a&&a.p&&(!e||t&8)&&Kl(a,l,s,s[3],e?Yl(l,s[3],t,null):Ql(s[3]),null)},i(s){e||(R(a,s),e=!0)},o(s){j(a,s),e=!1},d(s){a&&a.d(s)}}}function Wt(n){let e,l;const a=[{name:"bookmark"},n[1],{iconNode:n[0]}];let s={$$slots:{default:[Yt]},$$scope:{ctx:n}};for(let t=0;t<a.length;t+=1)s=Ne(s,a[t]);return e=new $l({props:s}),{c(){ve(e.$$.fragment)},l(t){be(e.$$.fragment,t)},m(t,r){ge(e,t,r),l=!0},p(t,[r]){const c=r&3?Fl(a,[a[0],r&2&&Xl(t[1]),r&1&&{iconNode:t[0]}]):{};r&8&&(c.$$scope={dirty:r,ctx:t}),e.$set(c)},i(t){l||(R(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){me(e,t)}}}function $t(n,e,l){let{$$slots:a={},$$scope:s}=e;const t=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"}]];return n.$$set=r=>{l(1,e=Ne(Ne({},e),Ke(r))),"$$scope"in r&&l(3,s=r.$$scope)},e=Ke(e),[t,e,a,s]}class xt extends Ye{constructor(e){super(),We(this,e,$t,Wt,$e,{})}}const Dt=xt;function es(n){let e;const l=n[2].default,a=Jl(l,n,n[3],null);return{c(){a&&a.c()},l(s){a&&a.l(s)},m(s,t){a&&a.m(s,t),e=!0},p(s,t){a&&a.p&&(!e||t&8)&&Kl(a,l,s,s[3],e?Yl(l,s[3],t,null):Ql(s[3]),null)},i(s){e||(R(a,s),e=!0)},o(s){j(a,s),e=!1},d(s){a&&a.d(s)}}}function ls(n){let e,l;const a=[{name:"search"},n[1],{iconNode:n[0]}];let s={$$slots:{default:[es]},$$scope:{ctx:n}};for(let t=0;t<a.length;t+=1)s=Ne(s,a[t]);return e=new $l({props:s}),{c(){ve(e.$$.fragment)},l(t){be(e.$$.fragment,t)},m(t,r){ge(e,t,r),l=!0},p(t,[r]){const c=r&3?Fl(a,[a[0],r&2&&Xl(t[1]),r&1&&{iconNode:t[0]}]):{};r&8&&(c.$$scope={dirty:r,ctx:t}),e.$set(c)},i(t){l||(R(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){me(e,t)}}}function ts(n,e,l){let{$$slots:a={},$$scope:s}=e;const t=[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]];return n.$$set=r=>{l(1,e=Ne(Ne({},e),Ke(r))),"$$scope"in r&&l(3,s=r.$$scope)},e=Ke(e),[t,e,a,s]}class ss extends Ye{constructor(e){super(),We(this,e,ts,ls,$e,{})}}const as=ss;function kt(n,e,l){const a=n.slice();return a[28]=e[l],a}function os(n){let e,l,a,s,t,r,c,u,b,v,L,g,m,k,z,B,M,X,q,A,I,P,w,x,S,G,O,Q,oe,se,p,D,H,F,ye,ne,re,E,U,J,W,ie,le,he,ae,ue,_e,ze,De,ce,Be,Ll,El,Cl,Ie,qe,yl,Nl,Ae,Bl,we,He,Il,Al,ke,wl,Te,Le,Ge,Tl,Pl,Pe,Sl,xe,Ml,Ee,je,Dl,Ul,Se,Vl,el,Zl,Me,Ue,Ol,Rl,Ve,zl,ql,xl,Fe=[...n[1]],te=[];for(let N=0;N<Fe.length;N+=1)te[N]=Lt(kt(n,Fe,N));function et(N,K){return N[5]?us:rs}let ol=et(n),de=ol(n);return{c(){e=h("h2"),l=V(n[7]),a=V(" libro"),s=C(),t=h("div"),r=h("label"),c=h("span"),u=V("Titolo:"),b=C(),v=h("input"),L=C(),g=h("div"),m=h("span"),k=V("Autore:"),z=C(),B=h("div"),M=h("input"),X=C(),q=h("input"),A=C(),I=h("label"),P=h("span"),w=V("Editore:"),x=C(),S=h("input"),G=C(),O=h("label"),Q=h("span"),oe=V("Luogo:"),se=C(),p=h("input"),D=C(),H=h("label"),F=h("span"),ye=V("Anno:"),ne=C(),re=h("input"),E=C(),U=h("label"),J=h("span"),W=V("Genere:"),ie=C(),le=h("input"),he=C(),ae=h("div"),ue=h("label"),_e=h("span"),ze=V("Scaffale:"),De=C(),ce=h("select"),Be=h("option"),Ll=V("Seleziona uno scaffale");for(let N=0;N<te.length;N+=1)te[N].c();El=C(),de.c(),Cl=C(),Ie=h("label"),qe=h("span"),yl=V("Commenti:"),Nl=C(),Ae=h("textarea"),Bl=C(),we=h("label"),He=h("span"),Il=V("Copertina:"),Al=C(),ke=h("input"),wl=C(),Te=h("div"),Le=h("label"),Ge=h("span"),Tl=V("Letto:"),Pl=C(),Pe=h("input"),Sl=C(),xe=h("span"),Ml=C(),Ee=h("label"),je=h("span"),Dl=V("Prestito:"),Ul=C(),Se=h("input"),Vl=C(),el=h("span"),Zl=C(),Me=h("div"),Ue=h("button"),Ol=V("Annulla"),Rl=C(),Ve=h("button"),zl=V("Salva"),this.h()},l(N){e=_(N,"H2",{class:!0});var K=d(e);l=Z(K,n[7]),a=Z(K," libro"),K.forEach(f),s=y(N),t=_(N,"DIV",{class:!0});var T=d(t);r=_(T,"LABEL",{class:!0});var Ze=d(r);c=_(Ze,"SPAN",{class:!0});var lt=d(c);u=Z(lt,"Titolo:"),lt.forEach(f),b=y(Ze),v=_(Ze,"INPUT",{type:!0,class:!0}),Ze.forEach(f),L=y(T),g=_(T,"DIV",{class:!0});var nl=d(g);m=_(nl,"SPAN",{class:!0});var tt=d(m);k=Z(tt,"Autore:"),tt.forEach(f),z=y(nl),B=_(nl,"DIV",{class:!0});var rl=d(B);M=_(rl,"INPUT",{type:!0,placeholder:!0,class:!0}),X=y(rl),q=_(rl,"INPUT",{type:!0,placeholder:!0,class:!0}),rl.forEach(f),nl.forEach(f),A=y(T),I=_(T,"LABEL",{});var ul=d(I);P=_(ul,"SPAN",{class:!0});var st=d(P);w=Z(st,"Editore:"),st.forEach(f),x=y(ul),S=_(ul,"INPUT",{type:!0,class:!0}),ul.forEach(f),G=y(T),O=_(T,"LABEL",{});var il=d(O);Q=_(il,"SPAN",{class:!0});var at=d(Q);oe=Z(at,"Luogo:"),at.forEach(f),se=y(il),p=_(il,"INPUT",{type:!0,class:!0}),il.forEach(f),D=y(T),H=_(T,"LABEL",{});var cl=d(H);F=_(cl,"SPAN",{class:!0});var ot=d(F);ye=Z(ot,"Anno:"),ot.forEach(f),ne=y(cl),re=_(cl,"INPUT",{type:!0,class:!0}),cl.forEach(f),E=y(T),U=_(T,"LABEL",{});var fl=d(U);J=_(fl,"SPAN",{class:!0});var nt=d(J);W=Z(nt,"Genere:"),nt.forEach(f),ie=y(fl),le=_(fl,"INPUT",{type:!0,class:!0}),fl.forEach(f),he=y(T),ae=_(T,"DIV",{class:!0});var pl=d(ae);ue=_(pl,"LABEL",{});var hl=d(ue);_e=_(hl,"SPAN",{class:!0});var rt=d(_e);ze=Z(rt,"Scaffale:"),rt.forEach(f),De=y(hl),ce=_(hl,"SELECT",{class:!0});var Hl=d(ce);Be=_(Hl,"OPTION",{});var ut=d(Be);Ll=Z(ut,"Seleziona uno scaffale"),ut.forEach(f);for(let Gl=0;Gl<te.length;Gl+=1)te[Gl].l(Hl);Hl.forEach(f),hl.forEach(f),El=y(pl),de.l(pl),pl.forEach(f),Cl=y(T),Ie=_(T,"LABEL",{class:!0});var _l=d(Ie);qe=_(_l,"SPAN",{class:!0});var it=d(qe);yl=Z(it,"Commenti:"),it.forEach(f),Nl=y(_l),Ae=_(_l,"TEXTAREA",{class:!0}),d(Ae).forEach(f),_l.forEach(f),Bl=y(T),we=_(T,"LABEL",{class:!0});var dl=d(we);He=_(dl,"SPAN",{class:!0});var ct=d(He);Il=Z(ct,"Copertina:"),ct.forEach(f),Al=y(dl),ke=_(dl,"INPUT",{type:!0,placeholder:!0,class:!0}),dl.forEach(f),wl=y(T),Te=_(T,"DIV",{class:!0});var vl=d(Te);Le=_(vl,"LABEL",{class:!0});var Xe=d(Le);Ge=_(Xe,"SPAN",{class:!0});var ft=d(Ge);Tl=Z(ft,"Letto:"),ft.forEach(f),Pl=y(Xe),Pe=_(Xe,"INPUT",{type:!0,class:!0}),Sl=y(Xe),xe=_(Xe,"SPAN",{class:!0}),d(xe).forEach(f),Xe.forEach(f),Ml=y(vl),Ee=_(vl,"LABEL",{class:!0});var Je=d(Ee);je=_(Je,"SPAN",{class:!0});var pt=d(je);Dl=Z(pt,"Prestito:"),pt.forEach(f),Ul=y(Je),Se=_(Je,"INPUT",{type:!0,class:!0}),Vl=y(Je),el=_(Je,"SPAN",{class:!0}),d(el).forEach(f),Je.forEach(f),vl.forEach(f),Zl=y(T),Me=_(T,"DIV",{class:!0});var bl=d(Me);Ue=_(bl,"BUTTON",{class:!0});var ht=d(Ue);Ol=Z(ht,"Annulla"),ht.forEach(f),Rl=y(bl),Ve=_(bl,"BUTTON",{class:!0});var _t=d(Ve);zl=Z(_t,"Salva"),_t.forEach(f),bl.forEach(f),T.forEach(f),this.h()},h(){i(e,"class","form-title svelte-1y9spff"),i(c,"class","label-text svelte-1y9spff"),i(v,"type","text"),v.required=!0,i(v,"class","svelte-1y9spff"),i(r,"class","full-width svelte-1y9spff"),i(m,"class","label-text svelte-1y9spff"),i(M,"type","text"),i(M,"placeholder","Nome"),i(M,"class","svelte-1y9spff"),i(q,"type","text"),i(q,"placeholder","Cognome"),i(q,"class","svelte-1y9spff"),i(B,"class","author-inputs svelte-1y9spff"),i(g,"class","author-group full-width svelte-1y9spff"),i(P,"class","label-text svelte-1y9spff"),i(S,"type","text"),i(S,"class","svelte-1y9spff"),i(Q,"class","label-text svelte-1y9spff"),i(p,"type","text"),i(p,"class","svelte-1y9spff"),i(F,"class","label-text svelte-1y9spff"),i(re,"type","number"),i(re,"class","svelte-1y9spff"),i(J,"class","label-text svelte-1y9spff"),i(le,"type","text"),i(le,"class","svelte-1y9spff"),i(_e,"class","label-text svelte-1y9spff"),Be.__value="",Be.value=Be.__value,i(ce,"class","svelte-1y9spff"),n[2].bookshelf===void 0&&Mt(()=>n[20].call(ce)),i(ae,"class","bookshelf-section full-width svelte-1y9spff"),i(qe,"class","label-text svelte-1y9spff"),i(Ae,"class","svelte-1y9spff"),i(Ie,"class","full-width svelte-1y9spff"),i(He,"class","label-text svelte-1y9spff"),i(ke,"type","text"),i(ke,"placeholder","Incolla il link dell'immagine di copertina"),i(ke,"class","svelte-1y9spff"),i(we,"class","full-width svelte-1y9spff"),i(Ge,"class","label-text svelte-1y9spff"),i(Pe,"type","checkbox"),i(Pe,"class","svelte-1y9spff"),i(xe,"class","checkmark"),i(Le,"class","toggle svelte-1y9spff"),i(je,"class","label-text svelte-1y9spff"),i(Se,"type","checkbox"),i(Se,"class","svelte-1y9spff"),i(el,"class","checkmark"),i(Ee,"class","toggle svelte-1y9spff"),i(Te,"class","toggles-group full-width svelte-1y9spff"),i(Ue,"class","discard svelte-1y9spff"),i(Ve,"class","save svelte-1y9spff"),i(Me,"class","buttons full-width svelte-1y9spff"),i(t,"class","form-grid svelte-1y9spff")},m(N,K){ee(N,e,K),o(e,l),o(e,a),ee(N,s,K),ee(N,t,K),o(t,r),o(r,c),o(c,u),o(r,b),o(r,v),$(v,n[2].title),o(t,L),o(t,g),o(g,m),o(m,k),o(g,z),o(g,B),o(B,M),$(M,n[2].authorName),o(B,X),o(B,q),$(q,n[2].authorSurname),o(t,A),o(t,I),o(I,P),o(P,w),o(I,x),o(I,S),$(S,n[2].editor),o(t,G),o(t,O),o(O,Q),o(Q,oe),o(O,se),o(O,p),$(p,n[2].place),o(t,D),o(t,H),o(H,F),o(F,ye),o(H,ne),o(H,re),$(re,n[2].year),o(t,E),o(t,U),o(U,J),o(J,W),o(U,ie),o(U,le),$(le,n[2].genre),o(t,he),o(t,ae),o(ae,ue),o(ue,_e),o(_e,ze),o(ue,De),o(ue,ce),o(ce,Be),o(Be,Ll);for(let T=0;T<te.length;T+=1)te[T]&&te[T].m(ce,null);ml(ce,n[2].bookshelf,!0),o(ae,El),de.m(ae,null),o(t,Cl),o(t,Ie),o(Ie,qe),o(qe,yl),o(Ie,Nl),o(Ie,Ae),$(Ae,n[2].comments),o(t,Bl),o(t,we),o(we,He),o(He,Il),o(we,Al),o(we,ke),$(ke,n[2].cover),o(t,wl),o(t,Te),o(Te,Le),o(Le,Ge),o(Ge,Tl),o(Le,Pl),o(Le,Pe),Pe.checked=n[2].read,o(Le,Sl),o(Le,xe),o(Te,Ml),o(Te,Ee),o(Ee,je),o(je,Dl),o(Ee,Ul),o(Ee,Se),Se.checked=n[2].loaned,o(Ee,Vl),o(Ee,el),o(t,Zl),o(t,Me),o(Me,Ue),o(Ue,Ol),o(Me,Rl),o(Me,Ve),o(Ve,zl),ql||(xl=[Y(v,"input",n[13]),Y(M,"input",n[14]),Y(q,"input",n[15]),Y(S,"input",n[16]),Y(p,"input",n[17]),Y(re,"input",n[18]),Y(le,"input",n[19]),Y(ce,"change",n[20]),Y(Ae,"input",n[23]),Y(ke,"input",n[24]),Y(Pe,"change",n[25]),Y(Se,"change",n[26]),Y(Ue,"click",n[10]),Y(Ve,"click",n[9])],ql=!0)},p(N,K){if(K&6&&v.value!==N[2].title&&$(v,N[2].title),K&6&&M.value!==N[2].authorName&&$(M,N[2].authorName),K&6&&q.value!==N[2].authorSurname&&$(q,N[2].authorSurname),K&6&&S.value!==N[2].editor&&$(S,N[2].editor),K&6&&p.value!==N[2].place&&$(p,N[2].place),K&6&&Pt(re.value)!==N[2].year&&$(re,N[2].year),K&6&&le.value!==N[2].genre&&$(le,N[2].genre),K&2){Fe=[...N[1]];let T;for(T=0;T<Fe.length;T+=1){const Ze=kt(N,Fe,T);te[T]?te[T].p(Ze,K):(te[T]=Lt(Ze),te[T].c(),te[T].m(ce,null))}for(;T<te.length;T+=1)te[T].d(1);te.length=Fe.length}K&6&&ml(ce,N[2].bookshelf),ol===(ol=et(N))&&de?de.p(N,K):(de.d(1),de=ol(N),de&&(de.c(),de.m(ae,null))),K&6&&$(Ae,N[2].comments),K&6&&ke.value!==N[2].cover&&$(ke,N[2].cover),K&6&&(Pe.checked=N[2].read),K&6&&(Se.checked=N[2].loaned)},i:Ce,o:Ce,d(N){N&&f(e),N&&f(s),N&&f(t),Wl(te,N),de.d(),ql=!1,kl(xl)}}}function ns(n){let e,l,a,s,t,r,c,u,b;return l=new Ot({}),{c(){e=h("div"),ve(l.$$.fragment),a=C(),s=h("div"),t=h("button"),r=V("Annulla"),this.h()},l(v){e=_(v,"DIV",{class:!0});var L=d(e);be(l.$$.fragment,L),a=y(L),s=_(L,"DIV",{class:!0});var g=d(s);t=_(g,"BUTTON",{class:!0});var m=d(t);r=Z(m,"Annulla"),m.forEach(f),g.forEach(f),L.forEach(f),this.h()},h(){i(t,"class","discard svelte-1y9spff"),i(s,"class","buttons svelte-1y9spff"),i(e,"class","loader svelte-1y9spff")},m(v,L){ee(v,e,L),ge(l,e,null),o(e,a),o(e,s),o(s,t),o(t,r),c=!0,u||(b=Y(t,"click",n[10]),u=!0)},p:Ce,i(v){c||(R(l.$$.fragment,v),c=!0)},o(v){j(l.$$.fragment,v),c=!1},d(v){v&&f(e),me(l),u=!1,b()}}}function Lt(n){let e,l=n[28]+"",a,s;return{c(){e=h("option"),a=V(l),this.h()},l(t){e=_(t,"OPTION",{});var r=d(e);a=Z(r,l),r.forEach(f),this.h()},h(){e.__value=s=n[28],e.value=e.__value},m(t,r){ee(t,e,r),o(e,a)},p(t,r){r&2&&l!==(l=t[28]+"")&&Qe(a,l),r&2&&s!==(s=t[28])&&(e.__value=s,e.value=e.__value)},d(t){t&&f(e)}}}function rs(n){let e,l,a,s;return{c(){e=h("button"),l=V("Nuovo scaffale"),this.h()},l(t){e=_(t,"BUTTON",{class:!0});var r=d(e);l=Z(r,"Nuovo scaffale"),r.forEach(f),this.h()},h(){i(e,"class","new-shelf svelte-1y9spff")},m(t,r){ee(t,e,r),o(e,l),a||(s=Y(e,"click",n[22]),a=!0)},p:Ce,d(t){t&&f(e),a=!1,s()}}}function us(n){let e,l,a,s,t,r,c;return{c(){e=h("div"),l=h("input"),a=C(),s=h("button"),t=V("Aggiungi"),this.h()},l(u){e=_(u,"DIV",{class:!0});var b=d(e);l=_(b,"INPUT",{type:!0,placeholder:!0,class:!0}),a=y(b),s=_(b,"BUTTON",{class:!0});var v=d(s);t=Z(v,"Aggiungi"),v.forEach(f),b.forEach(f),this.h()},h(){i(l,"type","text"),i(l,"placeholder","Nome nuovo scaffale"),i(l,"class","svelte-1y9spff"),i(s,"class","add-shelf svelte-1y9spff"),i(e,"class","new-bookshelf-input svelte-1y9spff")},m(u,b){ee(u,e,b),o(e,l),$(l,n[4]),o(e,a),o(e,s),o(s,t),r||(c=[Y(l,"input",n[21]),Y(s,"click",n[8])],r=!0)},p(u,b){b&16&&l.value!==u[4]&&$(l,u[4])},d(u){u&&f(e),r=!1,kl(c)}}}function is(n){let e,l,a,s,t,r;const c=[ns,os],u=[];function b(v,L){return v[3]||!v[6]?0:1}return a=b(n),s=u[a]=c[a](n),{c(){e=h("div"),l=h("div"),s.c(),this.h()},l(v){e=_(v,"DIV",{class:!0});var L=d(e);l=_(L,"DIV",{class:!0});var g=d(l);s.l(g),g.forEach(f),L.forEach(f),this.h()},h(){i(l,"class","pop-up svelte-1y9spff"),i(e,"class",t=dt(n[0]?"hidden":"overlay")+" svelte-1y9spff")},m(v,L){ee(v,e,L),o(e,l),u[a].m(l,null),r=!0},p(v,[L]){let g=a;a=b(v),a===g?u[a].p(v,L):(Oe(),j(u[g],1,1,()=>{u[g]=null}),Re(),s=u[a],s?s.p(v,L):(s=u[a]=c[a](v),s.c()),R(s,1),s.m(l,null)),(!r||L&1&&t!==(t=dt(v[0]?"hidden":"overlay")+" svelte-1y9spff"))&&i(e,"class",t)},i(v){r||(R(s),r=!0)},o(v){j(s),r=!1},d(v){v&&f(e),u[a].d()}}}function Et(){return{title:"",authorName:"",authorSurname:"",editor:"",place:"",year:"",genre:"",comments:"",bookshelf:"",read:!1,loaned:!1}}function cs(n,e,l){let a;gl(n,jl,p=>l(6,a=p));let{hidden:s=!0}=e,{length:t}=e,{update:r}=e,{scaffali:c}=e,{book:u=Et()}=e,b=u.title?"Modifica":"Aggiungi",v=!1,L="",g=!1;function m(){l(2,u=Et())}const k=()=>{const p=L.trim();p&&(l(1,c=new Set([...c,p])),l(4,L=""),l(5,g=!1),al("Nuovo scaffale aggiunto","success"))};async function z(){l(3,v=!0);try{const p=u.id??t;await Rt(`protectedData/${a}/${p}`,{...u,id:p}),al(`Libro ${b==="Aggiungi"?"aggiunto":"modificato"} con successo.`,"success"),l(11,r=!r),l(0,s=!0),m()}catch{al(`ERRORE: Il libro non è stato ${b==="Aggiungi"?"aggiunto":"modificato"} con successo.`,"fail")}finally{l(3,v=!1)}}function B(){l(0,s=!0),m()}function M(){u.title=this.value,l(2,u),l(1,c)}function X(){u.authorName=this.value,l(2,u),l(1,c)}function q(){u.authorSurname=this.value,l(2,u),l(1,c)}function A(){u.editor=this.value,l(2,u),l(1,c)}function I(){u.place=this.value,l(2,u),l(1,c)}function P(){u.year=Pt(this.value),l(2,u),l(1,c)}function w(){u.genre=this.value,l(2,u),l(1,c)}function x(){u.bookshelf=St(this),l(2,u),l(1,c)}function S(){L=this.value,l(4,L)}const G=()=>l(5,g=!0);function O(){u.comments=this.value,l(2,u),l(1,c)}function Q(){u.cover=this.value,l(2,u),l(1,c)}function oe(){u.read=this.checked,l(2,u),l(1,c)}function se(){u.loaned=this.checked,l(2,u),l(1,c)}return n.$$set=p=>{"hidden"in p&&l(0,s=p.hidden),"length"in p&&l(12,t=p.length),"update"in p&&l(11,r=p.update),"scaffali"in p&&l(1,c=p.scaffali),"book"in p&&l(2,u=p.book)},[s,c,u,v,L,g,a,b,k,z,B,r,t,M,X,q,A,I,P,w,x,S,G,O,Q,oe,se]}class fs extends Ye{constructor(e){super(),We(this,e,cs,is,$e,{hidden:0,length:12,update:11,scaffali:1,book:2})}}function ps(n){let e,l,a,s,t,r,c,u,b,v,L,g,m,k,z,B,M,X,q,A,I,P,w,x,S,G,O,Q,oe;return{c(){e=h("div"),l=h("div"),a=h("ul"),s=h("li"),t=fe("svg"),r=fe("path"),c=C(),u=h("li"),b=fe("svg"),v=fe("path"),L=C(),g=h("li"),m=fe("svg"),k=fe("path"),z=C(),B=h("li"),M=fe("svg"),X=fe("path"),q=C(),A=h("li"),I=fe("svg"),P=fe("path"),w=C(),x=h("li"),S=fe("svg"),G=fe("path"),O=C(),Q=h("span"),oe=V("Loading"),this.h()},l(se){e=_(se,"DIV",{class:!0});var p=d(e);l=_(p,"DIV",{class:!0});var D=d(l);a=_(D,"UL",{class:!0});var H=d(a);s=_(H,"LI",{class:!0});var F=d(s);t=pe(F,"svg",{fill:!0,viewBox:!0,class:!0});var ye=d(t);r=pe(ye,"path",{d:!0}),d(r).forEach(f),ye.forEach(f),F.forEach(f),c=y(H),u=_(H,"LI",{class:!0});var ne=d(u);b=pe(ne,"svg",{fill:!0,viewBox:!0,class:!0});var re=d(b);v=pe(re,"path",{d:!0}),d(v).forEach(f),re.forEach(f),ne.forEach(f),L=y(H),g=_(H,"LI",{class:!0});var E=d(g);m=pe(E,"svg",{fill:!0,viewBox:!0,class:!0});var U=d(m);k=pe(U,"path",{d:!0}),d(k).forEach(f),U.forEach(f),E.forEach(f),z=y(H),B=_(H,"LI",{class:!0});var J=d(B);M=pe(J,"svg",{fill:!0,viewBox:!0,class:!0});var W=d(M);X=pe(W,"path",{d:!0}),d(X).forEach(f),W.forEach(f),J.forEach(f),q=y(H),A=_(H,"LI",{class:!0});var ie=d(A);I=pe(ie,"svg",{fill:!0,viewBox:!0,class:!0});var le=d(I);P=pe(le,"path",{d:!0}),d(P).forEach(f),le.forEach(f),ie.forEach(f),w=y(H),x=_(H,"LI",{class:!0});var he=d(x);S=pe(he,"svg",{fill:!0,viewBox:!0,class:!0});var ae=d(S);G=pe(ae,"path",{d:!0}),d(G).forEach(f),ae.forEach(f),he.forEach(f),H.forEach(f),O=y(D),D.forEach(f),Q=_(p,"SPAN",{class:!0});var ue=d(Q);oe=Z(ue,"Loading"),ue.forEach(f),p.forEach(f),this.h()},h(){i(r,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),i(t,"fill","currentColor"),i(t,"viewBox","0 0 90 120"),i(t,"class","svelte-1lyp77k"),i(s,"class","svelte-1lyp77k"),i(v,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),i(b,"fill","currentColor"),i(b,"viewBox","0 0 90 120"),i(b,"class","svelte-1lyp77k"),i(u,"class","svelte-1lyp77k"),i(k,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),i(m,"fill","currentColor"),i(m,"viewBox","0 0 90 120"),i(m,"class","svelte-1lyp77k"),i(g,"class","svelte-1lyp77k"),i(X,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),i(M,"fill","currentColor"),i(M,"viewBox","0 0 90 120"),i(M,"class","svelte-1lyp77k"),i(B,"class","svelte-1lyp77k"),i(P,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),i(I,"fill","currentColor"),i(I,"viewBox","0 0 90 120"),i(I,"class","svelte-1lyp77k"),i(A,"class","svelte-1lyp77k"),i(G,"d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"),i(S,"fill","currentColor"),i(S,"viewBox","0 0 90 120"),i(S,"class","svelte-1lyp77k"),i(x,"class","svelte-1lyp77k"),i(a,"class","svelte-1lyp77k"),i(l,"class","svelte-1lyp77k"),i(Q,"class","svelte-1lyp77k"),i(e,"class","loader svelte-1lyp77k")},m(se,p){ee(se,e,p),o(e,l),o(l,a),o(a,s),o(s,t),o(t,r),o(a,c),o(a,u),o(u,b),o(b,v),o(a,L),o(a,g),o(g,m),o(m,k),o(a,z),o(a,B),o(B,M),o(M,X),o(a,q),o(a,A),o(A,I),o(I,P),o(a,w),o(a,x),o(x,S),o(S,G),o(l,O),o(e,Q),o(Q,oe)},p:Ce,i:Ce,o:Ce,d(se){se&&f(e)}}}class hs extends Ye{constructor(e){super(),We(this,e,null,ps,$e,{})}}const{Boolean:_s}=Zt;function Ct(n,e,l){const a=n.slice();return a[28]=e[l],a}function yt(n,e,l){const a=n.slice();return a[31]=e[l],a}function Nt(n){let e,l,a,s,t;return l=new Ht({props:{size:24}}),{c(){e=h("button"),ve(l.$$.fragment),this.h()},l(r){e=_(r,"BUTTON",{class:!0,"aria-label":!0});var c=d(e);be(l.$$.fragment,c),c.forEach(f),this.h()},h(){i(e,"class","add-book-button svelte-41xi5l"),i(e,"aria-label","Add new book")},m(r,c){ee(r,e,c),ge(l,e,null),a=!0,s||(t=Y(e,"click",n[11]),s=!0)},p:Ce,i(r){a||(R(l.$$.fragment,r),a=!0)},o(r){j(l.$$.fragment,r),a=!1},d(r){r&&f(e),me(l),s=!1,t()}}}function Bt(n){let e,l,a,s,t,r,c;function u(k){n[15](k)}function b(k){n[16](k)}function v(k){n[17](k)}function L(k){n[18](k)}function g(k){n[19](k)}let m={};return n[6]!==void 0&&(m.hidden=n[6]),n[7]!==void 0&&(m.book=n[7]),n[3].length!==void 0&&(m.length=n[3].length),n[0]!==void 0&&(m.update=n[0]),n[5]!==void 0&&(m.scaffali=n[5]),e=new fs({props:m}),ll.push(()=>tl(e,"hidden",u)),ll.push(()=>tl(e,"book",b)),ll.push(()=>tl(e,"length",v)),ll.push(()=>tl(e,"update",L)),ll.push(()=>tl(e,"scaffali",g)),{c(){ve(e.$$.fragment)},l(k){be(e.$$.fragment,k)},m(k,z){ge(e,k,z),c=!0},p(k,z){const B={};!l&&z[0]&64&&(l=!0,B.hidden=k[6],sl(()=>l=!1)),!a&&z[0]&128&&(a=!0,B.book=k[7],sl(()=>a=!1)),!s&&z[0]&8&&(s=!0,B.length=k[3].length,sl(()=>s=!1)),!t&&z[0]&1&&(t=!0,B.update=k[0],sl(()=>t=!1)),!r&&z[0]&32&&(r=!0,B.scaffali=k[5],sl(()=>r=!1)),e.$set(B)},i(k){c||(R(e.$$.fragment,k),c=!0)},o(k){j(e.$$.fragment,k),c=!1},d(k){me(e,k)}}}function It(n){let e,l=n[31]+"",a,s;return{c(){e=h("option"),a=V(l),this.h()},l(t){e=_(t,"OPTION",{});var r=d(e);a=Z(r,l),r.forEach(f),this.h()},h(){e.__value=s=n[31],e.value=e.__value},m(t,r){ee(t,e,r),o(e,a)},p(t,r){r[0]&32&&l!==(l=t[31]+"")&&Qe(a,l),r[0]&32&&s!==(s=t[31])&&(e.__value=s,e.value=e.__value)},d(t){t&&f(e)}}}function ds(n){let e,l,a;return l=new hs({}),{c(){e=h("div"),ve(l.$$.fragment),this.h()},l(s){e=_(s,"DIV",{class:!0});var t=d(e);be(l.$$.fragment,t),t.forEach(f),this.h()},h(){i(e,"class","loader-container svelte-41xi5l")},m(s,t){ee(s,e,t),ge(l,e,null),a=!0},p:Ce,i(s){a||(R(l.$$.fragment,s),a=!0)},o(s){j(l.$$.fragment,s),a=!1},d(s){s&&f(e),me(l)}}}function vs(n){let e,l,a,s;const t=[gs,bs],r=[];function c(u,b){return u[9].length>0?0:1}return e=c(n),l=r[e]=t[e](n),{c(){l.c(),a=vt()},l(u){l.l(u),a=vt()},m(u,b){r[e].m(u,b),ee(u,a,b),s=!0},p(u,b){let v=e;e=c(u),e===v?r[e].p(u,b):(Oe(),j(r[v],1,1,()=>{r[v]=null}),Re(),l=r[e],l?l.p(u,b):(l=r[e]=t[e](u),l.c()),R(l,1),l.m(a.parentNode,a))},i(u){s||(R(l),s=!0)},o(u){j(l),s=!1},d(u){r[e].d(u),u&&f(a)}}}function bs(n){let e,l,a,s,t,r,c,u,b;return l=new Qt({props:{size:48}}),{c(){e=h("div"),ve(l.$$.fragment),a=C(),s=h("p"),t=V("No books found"),r=C(),c=h("p"),u=V("Try adjusting your search or bookshelf filter"),this.h()},l(v){e=_(v,"DIV",{class:!0});var L=d(e);be(l.$$.fragment,L),a=y(L),s=_(L,"P",{});var g=d(s);t=Z(g,"No books found"),g.forEach(f),r=y(L),c=_(L,"P",{class:!0});var m=d(c);u=Z(m,"Try adjusting your search or bookshelf filter"),m.forEach(f),L.forEach(f),this.h()},h(){i(c,"class","empty-state-subtitle svelte-41xi5l"),i(e,"class","empty-state svelte-41xi5l")},m(v,L){ee(v,e,L),ge(l,e,null),o(e,a),o(e,s),o(s,t),o(e,r),o(e,c),o(c,u),b=!0},p:Ce,i(v){b||(R(l.$$.fragment,v),b=!0)},o(v){j(l.$$.fragment,v),b=!1},d(v){v&&f(e),me(l)}}}function gs(n){let e,l,a=n[9],s=[];for(let r=0;r<a.length;r+=1)s[r]=Tt(Ct(n,a,r));const t=r=>j(s[r],1,1,()=>{s[r]=null});return{c(){e=h("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=_(r,"DIV",{class:!0});var c=d(e);for(let u=0;u<s.length;u+=1)s[u].l(c);c.forEach(f),this.h()},h(){i(e,"class","book-grid svelte-41xi5l")},m(r,c){ee(r,e,c);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);l=!0},p(r,c){if(c[0]&13824){a=r[9];let u;for(u=0;u<a.length;u+=1){const b=Ct(r,a,u);s[u]?(s[u].p(b,c),R(s[u],1)):(s[u]=Tt(b),s[u].c(),R(s[u],1),s[u].m(e,null))}for(Oe(),u=a.length;u<s.length;u+=1)t(u);Re()}},i(r){if(!l){for(let c=0;c<a.length;c+=1)R(s[c]);l=!0}},o(r){s=s.filter(_s);for(let c=0;c<s.length;c+=1)j(s[c]);l=!1},d(r){r&&f(e),Wl(s,r)}}}function At(n){let e,l,a,s=n[28].bookshelf+"",t,r;return l=new Dt({props:{size:16}}),{c(){e=h("p"),ve(l.$$.fragment),a=C(),t=V(s),this.h()},l(c){e=_(c,"P",{class:!0});var u=d(e);be(l.$$.fragment,u),a=y(u),t=Z(u,s),u.forEach(f),this.h()},h(){i(e,"class","book-shelf svelte-41xi5l")},m(c,u){ee(c,e,u),ge(l,e,null),o(e,a),o(e,t),r=!0},p(c,u){(!r||u[0]&512)&&s!==(s=c[28].bookshelf+"")&&Qe(t,s)},i(c){r||(R(l.$$.fragment,c),r=!0)},o(c){j(l.$$.fragment,c),r=!1},d(c){c&&f(e),me(l)}}}function wt(n){let e,l,a,s,t,r,c,u,b;function v(){return n[22](n[28])}function L(){return n[23](n[28])}return{c(){e=h("div"),l=h("button"),a=V("Modifica"),s=C(),t=h("button"),r=V("Rimuovi"),this.h()},l(g){e=_(g,"DIV",{class:!0});var m=d(e);l=_(m,"BUTTON",{class:!0});var k=d(l);a=Z(k,"Modifica"),k.forEach(f),s=y(m),t=_(m,"BUTTON",{class:!0,"aria-label":!0});var z=d(t);r=Z(z,"Rimuovi"),z.forEach(f),m.forEach(f),this.h()},h(){i(l,"class","edit-button svelte-41xi5l"),i(t,"class","delete-button svelte-41xi5l"),i(t,"aria-label",c=`Remove ${n[28].title}`),i(e,"class","actions svelte-41xi5l")},m(g,m){ee(g,e,m),o(e,l),o(l,a),o(e,s),o(e,t),o(t,r),u||(b=[Y(l,"click",v),Y(t,"click",L)],u=!0)},p(g,m){n=g,m[0]&512&&c!==(c=`Remove ${n[28].title}`)&&i(t,"aria-label",c)},d(g){g&&f(e),u=!1,kl(b)}}}function Tt(n){let e,l,a,s,t,r,c,u,b=n[28].title+"",v,L,g,m,k=n[28].author+"",z,B,M,X,q,A=n[28].bookshelf&&At(n),I=n[10]&&wt(n);return{c(){e=h("article"),l=h("div"),a=h("img"),r=C(),c=h("div"),u=h("h2"),v=V(b),L=C(),g=h("p"),m=V("by "),z=V(k),B=C(),A&&A.c(),M=C(),I&&I.c(),X=C(),this.h()},l(P){e=_(P,"ARTICLE",{class:!0});var w=d(e);l=_(w,"DIV",{class:!0});var x=d(l);a=_(x,"IMG",{class:!0,src:!0,alt:!0,loading:!0}),x.forEach(f),r=y(w),c=_(w,"DIV",{class:!0});var S=d(c);u=_(S,"H2",{class:!0});var G=d(u);v=Z(G,b),G.forEach(f),L=y(S),g=_(S,"P",{class:!0});var O=d(g);m=Z(O,"by "),z=Z(O,k),O.forEach(f),B=y(S),A&&A.l(S),S.forEach(f),M=y(w),I&&I.l(w),X=y(w),w.forEach(f),this.h()},h(){i(a,"class","book-cover svelte-41xi5l"),bt(a.src,s=n[28].cover)||i(a,"src",s),i(a,"alt",t=`Cover of ${n[28].title}`),i(a,"loading","lazy"),i(l,"class","cover-container svelte-41xi5l"),i(u,"class","book-title svelte-41xi5l"),i(g,"class","book-author svelte-41xi5l"),i(c,"class","book-info svelte-41xi5l"),i(e,"class","book-card svelte-41xi5l")},m(P,w){ee(P,e,w),o(e,l),o(l,a),o(e,r),o(e,c),o(c,u),o(u,v),o(c,L),o(c,g),o(g,m),o(g,z),o(c,B),A&&A.m(c,null),o(e,M),I&&I.m(e,null),o(e,X),q=!0},p(P,w){(!q||w[0]&512&&!bt(a.src,s=P[28].cover))&&i(a,"src",s),(!q||w[0]&512&&t!==(t=`Cover of ${P[28].title}`))&&i(a,"alt",t),(!q||w[0]&512)&&b!==(b=P[28].title+"")&&Qe(v,b),(!q||w[0]&512)&&k!==(k=P[28].author+"")&&Qe(z,k),P[28].bookshelf?A?(A.p(P,w),w[0]&512&&R(A,1)):(A=At(P),A.c(),R(A,1),A.m(c,null)):A&&(Oe(),j(A,1,1,()=>{A=null}),Re()),P[10]?I?I.p(P,w):(I=wt(P),I.c(),I.m(e,X)):I&&(I.d(1),I=null)},i(P){q||(R(A),q=!0)},o(P){j(A),q=!1},d(P){P&&f(e),A&&A.d(),I&&I.d()}}}function ms(n){let e,l,a,s,t,r,c,u,b=n[4].replace("_"," ")+"",v,L,g,m,k,z,B,M,X,q,A,I,P,w,x,S,G,O,Q,oe,se,p=n[10]&&Nt(n),D=!n[6]&&Bt(n);k=new Dt({props:{size:20}});let H=[...n[5]],F=[];for(let E=0;E<H.length;E+=1)F[E]=It(yt(n,H,E));I=new as({props:{size:20}});const ye=[vs,ds],ne=[];function re(E,U){return E[8]?1:0}return G=re(n),O=ne[G]=ye[G](n),{c(){p&&p.c(),e=C(),l=h("main"),D&&D.c(),a=C(),s=h("div"),t=h("h1"),r=V("Biblioteca:"),c=C(),u=h("h1"),v=V(b),L=C(),g=h("div"),m=h("div"),ve(k.$$.fragment),z=C(),B=h("select"),M=h("option"),X=V("All Bookshelves");for(let E=0;E<F.length;E+=1)F[E].c();q=C(),A=h("div"),ve(I.$$.fragment),P=C(),w=h("input"),x=C(),S=h("div"),O.c(),this.h()},l(E){p&&p.l(E),e=y(E),l=_(E,"MAIN",{class:!0});var U=d(l);D&&D.l(U),a=y(U),s=_(U,"DIV",{class:!0});var J=d(s);t=_(J,"H1",{class:!0});var W=d(t);r=Z(W,"Biblioteca:"),W.forEach(f),c=y(J),u=_(J,"H1",{class:!0});var ie=d(u);v=Z(ie,b),ie.forEach(f),L=y(J),g=_(J,"DIV",{class:!0});var le=d(g);m=_(le,"DIV",{class:!0});var he=d(m);be(k.$$.fragment,he),z=y(he),B=_(he,"SELECT",{"aria-label":!0,class:!0});var ae=d(B);M=_(ae,"OPTION",{});var ue=d(M);X=Z(ue,"All Bookshelves"),ue.forEach(f);for(let De=0;De<F.length;De+=1)F[De].l(ae);ae.forEach(f),he.forEach(f),q=y(le),A=_(le,"DIV",{class:!0});var _e=d(A);be(I.$$.fragment,_e),P=y(_e),w=_(_e,"INPUT",{type:!0,placeholder:!0,"aria-label":!0,class:!0}),_e.forEach(f),le.forEach(f),J.forEach(f),x=y(U),S=_(U,"DIV",{class:!0});var ze=d(S);O.l(ze),ze.forEach(f),U.forEach(f),this.h()},h(){i(t,"class","page-title svelte-41xi5l"),i(u,"class","lib-title"),M.__value="all",M.value=M.__value,i(B,"aria-label","Filter by bookshelf"),i(B,"class","svelte-41xi5l"),n[1]===void 0&&Mt(()=>n[20].call(B)),i(m,"class","bookshelf-filter svelte-41xi5l"),i(w,"type","text"),i(w,"placeholder","Cerca libri..."),i(w,"aria-label","Search books"),i(w,"class","svelte-41xi5l"),i(A,"class","search-bar svelte-41xi5l"),i(g,"class","filters svelte-41xi5l"),i(s,"class","top-actions svelte-41xi5l"),i(S,"class","book-grid-container svelte-41xi5l"),i(l,"class","content svelte-41xi5l")},m(E,U){p&&p.m(E,U),ee(E,e,U),ee(E,l,U),D&&D.m(l,null),o(l,a),o(l,s),o(s,t),o(t,r),o(s,c),o(s,u),o(u,v),o(s,L),o(s,g),o(g,m),ge(k,m,null),o(m,z),o(m,B),o(B,M),o(M,X);for(let J=0;J<F.length;J+=1)F[J]&&F[J].m(B,null);ml(B,n[1],!0),o(g,q),o(g,A),ge(I,A,null),o(A,P),o(A,w),$(w,n[2]),o(l,x),o(l,S),ne[G].m(S,null),Q=!0,oe||(se=[Y(B,"change",n[20]),Y(w,"input",n[21])],oe=!0)},p(E,U){if(E[10]?p?(p.p(E,U),U[0]&1024&&R(p,1)):(p=Nt(E),p.c(),R(p,1),p.m(e.parentNode,e)):p&&(Oe(),j(p,1,1,()=>{p=null}),Re()),E[6]?D&&(Oe(),j(D,1,1,()=>{D=null}),Re()):D?(D.p(E,U),U[0]&64&&R(D,1)):(D=Bt(E),D.c(),R(D,1),D.m(l,a)),(!Q||U[0]&16)&&b!==(b=E[4].replace("_"," ")+"")&&Qe(v,b),U[0]&32){H=[...E[5]];let W;for(W=0;W<H.length;W+=1){const ie=yt(E,H,W);F[W]?F[W].p(ie,U):(F[W]=It(ie),F[W].c(),F[W].m(B,null))}for(;W<F.length;W+=1)F[W].d(1);F.length=H.length}U[0]&34&&ml(B,E[1]),U[0]&4&&w.value!==E[2]&&$(w,E[2]);let J=G;G=re(E),G===J?ne[G].p(E,U):(Oe(),j(ne[J],1,1,()=>{ne[J]=null}),Re(),O=ne[G],O?O.p(E,U):(O=ne[G]=ye[G](E),O.c()),R(O,1),O.m(S,null))},i(E){Q||(R(p),R(D),R(k.$$.fragment,E),R(I.$$.fragment,E),R(O),Q=!0)},o(E){j(p),j(D),j(k.$$.fragment,E),j(I.$$.fragment,E),j(O),Q=!1},d(E){p&&p.d(E),E&&f(e),E&&f(l),D&&D.d(),me(k),Wl(F,E),me(I),ne[G].d(),oe=!1,kl(se)}}}function ks(n,e,l){let a,s,t;gl(n,jl,p=>l(4,a=p)),gl(n,mt,p=>l(14,s=p)),gl(n,jt,p=>l(25,t=p)),Ut(async()=>{Gt.set(!1),mt.set(await zt(t.uid).then(p=>l(10,B=p))),z=t.photoURL??"/profile_placeholder.png",await gt(`users/${t.uid}/biblioteca`).then(async p=>{console.log("userLib:",p),Vt(jl,a=p,a),await X(p)})});let r=!1,c=new Set,u="all",b=!0,v,L=!0,g="",m=[],k=[],z,B;const M=p=>{l(7,v=p),l(6,b=!b)},X=async p=>{l(8,L=!0),await gt(`protectedData/${p}`).then(D=>{l(3,m=D),l(5,c=new Set(D.map(H=>H.bookshelf).filter(Boolean))),l(9,k=D),l(8,L=!1)})},q=()=>{l(6,b=!b)},A=p=>{M(p)},I=async p=>{try{l(8,L=!0),await qt(`protectedData/${a}/${p.id}`),await X(a),al("Book removed successfully","success")}catch(D){al("Failed to remove book","error"),console.error(D)}finally{l(8,L=!1)}};function P(p){b=p,l(6,b)}function w(p){v=p,l(7,v)}function x(p){n.$$.not_equal(m.length,p)&&(m.length=p,l(3,m))}function S(p){r=p,l(0,r),l(4,a)}function G(p){c=p,l(5,c)}function O(){u=St(this),l(1,u),l(5,c)}function Q(){g=this.value,l(2,g)}const oe=p=>A(p),se=p=>I(p);return n.$$.update=()=>{n.$$.dirty[0]&16384&&l(10,B=s),n.$$.dirty[0]&14&&l(9,k=m.filter(p=>{const D=g.trim()===""||p.title.toLowerCase().includes(g.toLowerCase()),H=u==="all"||p.bookshelf===u;return D&&H})),n.$$.dirty[0]&17&&(a&&X(a),r&&(X(a),l(0,r=!1)))},[r,u,g,m,a,c,b,v,L,k,B,q,A,I,s,P,w,x,S,G,O,Q,oe,se]}class Is extends Ye{constructor(e){super(),We(this,e,ks,ms,$e,{},null,[-1,-1])}}export{Is as component};
