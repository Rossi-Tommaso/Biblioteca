import{S as Oe,i as qe,s as je,I as me,y as ne,z as ie,A as ce,J as pt,K as mt,g as R,d as U,B as ue,L as ye,M as bt,N as gt,O as kt,P as zt,k as b,q as A,a as P,l as g,m,r as B,h as u,c as V,n as c,b as O,E as r,u as oe,f as ge,H as rt,o as wt,Z as At,v as ke,a0 as Bt,C as Be,D as De,G as J,e as Le,$ as Et,T as ot,U as Dt,_ as nt,F as te,Y as Nt,X as it}from"../chunks/index.d08effdb.js";import{S as It}from"../chunks/simpleLoader.fc6986a4.js";import{s as yt,m as Lt,u as Pt}from"../chunks/authStore.3bb8eab3.js";import{a as Vt,f as Ie,g as St,u as Tt,c as Ct}from"../chunks/db_functions.f650cbce.js";import{e as ct}from"../chunks/singletons.202daa2f.js";import{b as Me,P as Ht}from"../chunks/libStore.f2bdde06.js";import{I as $t}from"../chunks/Icon.4dc19c6d.js";import{S as Rt}from"../chunks/settings.32f05e59.js";function Ut(n){let e;const l=n[2].default,t=bt(l,n,n[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,a){t&&t.m(s,a),e=!0},p(s,a){t&&t.p&&(!e||a&8)&&gt(t,l,s,s[3],e?zt(l,s[3],a,null):kt(s[3]),null)},i(s){e||(R(t,s),e=!0)},o(s){U(t,s),e=!1},d(s){t&&t.d(s)}}}function Mt(n){let e,l;const t=[{name:"arrow-right-left"},n[1],{iconNode:n[0]}];let s={$$slots:{default:[Ut]},$$scope:{ctx:n}};for(let a=0;a<t.length;a+=1)s=me(s,t[a]);return e=new $t({props:s}),{c(){ne(e.$$.fragment)},l(a){ie(e.$$.fragment,a)},m(a,o){ce(e,a,o),l=!0},p(a,[o]){const d=o&3?pt(t,[t[0],o&2&&mt(a[1]),o&1&&{iconNode:a[0]}]):{};o&8&&(d.$$scope={dirty:o,ctx:a}),e.$set(d)},i(a){l||(R(e.$$.fragment,a),l=!0)},o(a){U(e.$$.fragment,a),l=!1},d(a){ue(e,a)}}}function Ot(n,e,l){let{$$slots:t={},$$scope:s}=e;const a=[["path",{d:"m16 3 4 4-4 4"}],["path",{d:"M20 7H4"}],["path",{d:"m8 21-4-4 4-4"}],["path",{d:"M4 17h16"}]];return n.$$set=o=>{l(1,e=me(me({},e),ye(o))),"$$scope"in o&&l(3,s=o.$$scope)},e=ye(e),[a,e,t,s]}class qt extends Oe{constructor(e){super(),qe(this,e,Ot,Mt,je,{})}}const jt=qt;function Gt(n){let e;const l=n[2].default,t=bt(l,n,n[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,a){t&&t.m(s,a),e=!0},p(s,a){t&&t.p&&(!e||a&8)&&gt(t,l,s,s[3],e?zt(l,s[3],a,null):kt(s[3]),null)},i(s){e||(R(t,s),e=!0)},o(s){U(t,s),e=!1},d(s){t&&t.d(s)}}}function Ft(n){let e,l;const t=[{name:"library"},n[1],{iconNode:n[0]}];let s={$$slots:{default:[Gt]},$$scope:{ctx:n}};for(let a=0;a<t.length;a+=1)s=me(s,t[a]);return e=new $t({props:s}),{c(){ne(e.$$.fragment)},l(a){ie(e.$$.fragment,a)},m(a,o){ce(e,a,o),l=!0},p(a,[o]){const d=o&3?pt(t,[t[0],o&2&&mt(a[1]),o&1&&{iconNode:a[0]}]):{};o&8&&(d.$$scope={dirty:o,ctx:a}),e.$set(d)},i(a){l||(R(e.$$.fragment,a),l=!0)},o(a){U(e.$$.fragment,a),l=!1},d(a){ue(e,a)}}}function Jt(n,e,l){let{$$slots:t={},$$scope:s}=e;const a=[["path",{d:"m16 6 4 14"}],["path",{d:"M12 6v14"}],["path",{d:"M8 8v12"}],["path",{d:"M4 4v16"}]];return n.$$set=o=>{l(1,e=me(me({},e),ye(o))),"$$scope"in o&&l(3,s=o.$$scope)},e=ye(e),[a,e,t,s]}class Kt extends Oe{constructor(e){super(),qe(this,e,Jt,Ft,je,{})}}const Xt=Kt;function ut(n,e,l){const t=n.slice();return t[22]=e[l],t}function ft(n,e,l){const t=n.slice();return t[25]=e[l],t}function Yt(n){let e,l,t,s,a,o,d,v,h,_,p,i,z,f="(",k,L,w,$,M,q=")",D,I,E,y;return{c(){e=b("div"),l=b("div"),t=b("div"),s=Be("svg"),a=Be("circle"),o=Be("line"),d=Be("line"),v=P(),h=b("h3"),_=A("Accesso non autorizzato"),p=P(),i=b("p"),z=A(`Non hai accesso a questa biblioteca. Per favore, contatta
          l'amministratore per richiedere la creazione di una nuova biblioteca `),k=A(f),L=A(`nella
          mail `),w=b("b"),$=A("specifica il nome della biblioteca"),M=A(" che vuoi creare"),D=A(q),I=P(),E=b("a"),y=A("Contatta l'Amministratore"),this.h()},l(S){e=g(S,"DIV",{class:!0});var F=m(e);l=g(F,"DIV",{class:!0});var j=m(l);t=g(j,"DIV",{class:!0});var fe=m(t);s=De(fe,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var W=m(s);a=De(W,"circle",{cx:!0,cy:!0,r:!0}),m(a).forEach(u),o=De(W,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),m(o).forEach(u),d=De(W,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),m(d).forEach(u),W.forEach(u),fe.forEach(u),v=V(j),h=g(j,"H3",{class:!0});var X=m(h);_=B(X,"Accesso non autorizzato"),X.forEach(u),p=V(j),i=g(j,"P",{class:!0});var C=m(i);z=B(C,`Non hai accesso a questa biblioteca. Per favore, contatta
          l'amministratore per richiedere la creazione di una nuova biblioteca `),k=B(C,f),L=B(C,`nella
          mail `),w=g(C,"B",{});var G=m(w);$=B(G,"specifica il nome della biblioteca"),G.forEach(u),M=B(C," che vuoi creare"),D=B(C,q),C.forEach(u),I=V(j),E=g(j,"A",{href:!0,class:!0});var le=m(E);y=B(le,"Contatta l'Amministratore"),le.forEach(u),j.forEach(u),F.forEach(u),this.h()},h(){c(a,"cx","12"),c(a,"cy","12"),c(a,"r","10"),c(o,"x1","15"),c(o,"y1","9"),c(o,"x2","9"),c(o,"y2","15"),c(d,"x1","9"),c(d,"y1","9"),c(d,"x2","15"),c(d,"y2","15"),c(s,"xmlns","http://www.w3.org/2000/svg"),c(s,"class","icon-unauthorized svelte-195id1z"),c(s,"viewBox","0 0 24 24"),c(s,"fill","none"),c(s,"stroke","currentColor"),c(s,"stroke-width","2"),c(s,"stroke-linecap","round"),c(s,"stroke-linejoin","round"),c(t,"class","icon-container svelte-195id1z"),c(h,"class","svelte-195id1z"),c(i,"class","svelte-195id1z"),c(E,"href","mailto:adm.biblioteca.6a8e6.6809336095@gmail.com"),c(E,"class","contact-button svelte-195id1z"),c(l,"class","unauthorized-content svelte-195id1z"),c(e,"class","unauthorized-container svelte-195id1z")},m(S,F){O(S,e,F),r(e,l),r(l,t),r(t,s),r(s,a),r(s,o),r(s,d),r(l,v),r(l,h),r(h,_),r(l,p),r(l,i),r(i,z),r(i,k),r(i,L),r(i,w),r(w,$),r(i,M),r(i,D),r(l,I),r(l,E),r(E,y)},p:J,i:J,o:J,d(S){S&&u(e)}}}function Zt(n){let e,l,t,s,a,o,d=n[4].totalBooks+"",v,h,_,p,i,z,f,k=n[4].booksRead+"",L,w,$,M,q,D,I,E=n[4].unread+"",y,S,F,j,fe,W,X,C,G,le,Y,be,Pe,Ve,K,Z,_e,se,Se,de,Te,Ce,Q,he,ae,He,ve,Re,Ue,re;const Ge=[xt,Wt,Qt],x=[];function Fe(N,T){return!N[2]&&N[1].length>0?0:N[2]?2:1}C=Fe(n),G=x[C]=Ge[C](n),se=new Xt({}),ae=new Rt({});let H=n[3]===2&&dt(n);return{c(){e=b("div"),l=b("div"),t=b("h3"),s=A("Libri Totali"),a=P(),o=b("p"),v=A(d),h=P(),_=b("div"),p=b("h3"),i=A("Libri Letti"),z=P(),f=b("p"),L=A(k),w=P(),$=b("div"),M=b("h3"),q=A("Non letti"),D=P(),I=b("p"),y=A(E),S=P(),F=b("div"),j=b("h2"),fe=A("Ultimi Libri Aggiunti"),W=P(),X=b("div"),G.c(),le=P(),Y=b("div"),be=b("h2"),Pe=A("Azioni Rapide"),Ve=P(),K=b("div"),Z=b("a"),_e=b("span"),ne(se.$$.fragment),Se=P(),de=b("span"),Te=A("Visualizza Biblioteca"),Ce=P(),Q=b("a"),he=b("span"),ne(ae.$$.fragment),He=P(),ve=b("span"),Re=A("Impostazioni"),Ue=P(),H&&H.c(),this.h()},l(N){e=g(N,"DIV",{class:!0});var T=m(e);l=g(T,"DIV",{class:!0});var ee=m(l);t=g(ee,"H3",{});var Je=m(t);s=B(Je,"Libri Totali"),Je.forEach(u),a=V(ee),o=g(ee,"P",{class:!0});var Ke=m(o);v=B(Ke,d),Ke.forEach(u),ee.forEach(u),h=V(T),_=g(T,"DIV",{class:!0});var ze=m(_);p=g(ze,"H3",{});var Xe=m(p);i=B(Xe,"Libri Letti"),Xe.forEach(u),z=V(ze),f=g(ze,"P",{class:!0});var Ye=m(f);L=B(Ye,k),Ye.forEach(u),ze.forEach(u),w=V(T),$=g(T,"DIV",{class:!0});var Ee=m($);M=g(Ee,"H3",{});var Ze=m(M);q=B(Ze,"Non letti"),Ze.forEach(u),D=V(Ee),I=g(Ee,"P",{class:!0});var Qe=m(I);y=B(Qe,E),Qe.forEach(u),Ee.forEach(u),T.forEach(u),S=V(N),F=g(N,"DIV",{class:!0});var Ne=m(F);j=g(Ne,"H2",{class:!0});var We=m(j);fe=B(We,"Ultimi Libri Aggiunti"),We.forEach(u),W=V(Ne),X=g(Ne,"DIV",{class:!0});var xe=m(X);G.l(xe),xe.forEach(u),Ne.forEach(u),le=V(N),Y=g(N,"DIV",{class:!0});var $e=m(Y);be=g($e,"H2",{});var et=m(be);Pe=B(et,"Azioni Rapide"),et.forEach(u),Ve=V($e),K=g($e,"DIV",{class:!0});var pe=m(K);Z=g(pe,"A",{href:!0,class:!0});var we=m(Z);_e=g(we,"SPAN",{class:!0});var tt=m(_e);ie(se.$$.fragment,tt),tt.forEach(u),Se=V(we),de=g(we,"SPAN",{class:!0});var lt=m(de);Te=B(lt,"Visualizza Biblioteca"),lt.forEach(u),we.forEach(u),Ce=V(pe),Q=g(pe,"A",{href:!0,class:!0});var Ae=m(Q);he=g(Ae,"SPAN",{class:!0});var st=m(he);ie(ae.$$.fragment,st),st.forEach(u),He=V(Ae),ve=g(Ae,"SPAN",{class:!0});var at=m(ve);Re=B(at,"Impostazioni"),at.forEach(u),Ae.forEach(u),Ue=V(pe),H&&H.l(pe),pe.forEach(u),$e.forEach(u),this.h()},h(){c(o,"class","stat-number svelte-195id1z"),c(l,"class","stat-card svelte-195id1z"),c(f,"class","stat-number svelte-195id1z"),c(_,"class","stat-card svelte-195id1z"),c(I,"class","stat-number svelte-195id1z"),c($,"class","stat-card svelte-195id1z"),c(e,"class","stats-grid svelte-195id1z"),c(j,"class","svelte-195id1z"),c(X,"class","recent-books-grid svelte-195id1z"),c(F,"class","recent-books-section svelte-195id1z"),c(_e,"class","icon svelte-195id1z"),c(de,"class","text"),c(Z,"href",ct+"/biblioteca"),c(Z,"class","action-card svelte-195id1z"),c(he,"class","icon svelte-195id1z"),c(ve,"class","text"),c(Q,"href",ct+"/settings"),c(Q,"class","action-card svelte-195id1z"),c(K,"class","actions-grid svelte-195id1z"),c(Y,"class","quick-actions svelte-195id1z")},m(N,T){O(N,e,T),r(e,l),r(l,t),r(t,s),r(l,a),r(l,o),r(o,v),r(e,h),r(e,_),r(_,p),r(p,i),r(_,z),r(_,f),r(f,L),r(e,w),r(e,$),r($,M),r(M,q),r($,D),r($,I),r(I,y),O(N,S,T),O(N,F,T),r(F,j),r(j,fe),r(F,W),r(F,X),x[C].m(X,null),O(N,le,T),O(N,Y,T),r(Y,be),r(be,Pe),r(Y,Ve),r(Y,K),r(K,Z),r(Z,_e),ce(se,_e,null),r(Z,Se),r(Z,de),r(de,Te),r(K,Ce),r(K,Q),r(Q,he),ce(ae,he,null),r(Q,He),r(Q,ve),r(ve,Re),r(K,Ue),H&&H.m(K,null),re=!0},p(N,T){(!re||T&16)&&d!==(d=N[4].totalBooks+"")&&oe(v,d),(!re||T&16)&&k!==(k=N[4].booksRead+"")&&oe(L,k),(!re||T&16)&&E!==(E=N[4].unread+"")&&oe(y,E);let ee=C;C=Fe(N),C===ee?x[C].p(N,T):(ke(),U(x[ee],1,1,()=>{x[ee]=null}),ge(),G=x[C],G?G.p(N,T):(G=x[C]=Ge[C](N),G.c()),R(G,1),G.m(X,null)),N[3]===2?H?(H.p(N,T),T&8&&R(H,1)):(H=dt(N),H.c(),R(H,1),H.m(K,null)):H&&(ke(),U(H,1,1,()=>{H=null}),ge())},i(N){re||(R(G),R(se.$$.fragment,N),R(ae.$$.fragment,N),R(H),re=!0)},o(N){U(G),U(se.$$.fragment,N),U(ae.$$.fragment,N),U(H),re=!1},d(N){N&&u(e),N&&u(S),N&&u(F),x[C].d(),N&&u(le),N&&u(Y),ue(se),ue(ae),H&&H.d()}}}function Qt(n){let e,l;return e=new It({}),{c(){ne(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,s){ce(e,t,s),l=!0},p:J,i(t){l||(R(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Wt(n){let e,l;return{c(){e=b("p"),l=A("Nessun libro nella tua biblioteca"),this.h()},l(t){e=g(t,"P",{class:!0});var s=m(e);l=B(s,"Nessun libro nella tua biblioteca"),s.forEach(u),this.h()},h(){c(e,"class","no-books")},m(t,s){O(t,e,s),r(e,l)},p:J,i:J,o:J,d(t){t&&u(e)}}}function xt(n){let e,l=n[1].filter(vt).reverse(),t=[];for(let s=0;s<l.length;s+=1)t[s]=_t(ft(n,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=Le()},l(s){for(let a=0;a<t.length;a+=1)t[a].l(s);e=Le()},m(s,a){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,a);O(s,e,a)},p(s,a){if(a&2){l=s[1].filter(vt).reverse();let o;for(o=0;o<l.length;o+=1){const d=ft(s,l,o);t[o]?t[o].p(d,a):(t[o]=_t(d),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},i:J,o:J,d(s){Et(t,s),s&&u(e)}}}function _t(n){let e,l,t,s,a,o,d,v,h=n[25].title+"",_,p,i,z,f=(n[25].authorName&&n[25].authorSurname?n[25].authorName.concat(" "+n[25].authorSurname):"Autore sconosciuto")+"",k,L;return{c(){e=b("div"),l=b("div"),t=b("img"),o=P(),d=b("div"),v=b("h3"),_=A(h),p=P(),i=b("p"),z=A("di "),k=A(f),L=P(),this.h()},l(w){e=g(w,"DIV",{class:!0});var $=m(e);l=g($,"DIV",{class:!0});var M=m(l);t=g(M,"IMG",{class:!0,src:!0,alt:!0}),M.forEach(u),o=V($),d=g($,"DIV",{class:!0});var q=m(d);v=g(q,"H3",{class:!0});var D=m(v);_=B(D,h),D.forEach(u),p=V(q),i=g(q,"P",{class:!0});var I=m(i);z=B(I,"di "),k=B(I,f),I.forEach(u),q.forEach(u),L=V($),$.forEach(u),this.h()},h(){c(t,"class","book-cover svelte-195id1z"),ot(t.src,s=n[25].cover)||c(t,"src",s),c(t,"alt",a=`Copertina di ${n[25].title}`),c(l,"class","book-cover-container svelte-195id1z"),c(v,"class","svelte-195id1z"),c(i,"class","author svelte-195id1z"),c(d,"class","book-details svelte-195id1z"),c(e,"class","recent-book-card svelte-195id1z")},m(w,$){O(w,e,$),r(e,l),r(l,t),r(e,o),r(e,d),r(d,v),r(v,_),r(d,p),r(d,i),r(i,z),r(i,k),r(e,L)},p(w,$){$&2&&!ot(t.src,s=w[25].cover)&&c(t,"src",s),$&2&&a!==(a=`Copertina di ${w[25].title}`)&&c(t,"alt",a),$&2&&h!==(h=w[25].title+"")&&oe(_,h),$&2&&f!==(f=(w[25].authorName&&w[25].authorSurname?w[25].authorName.concat(" "+w[25].authorSurname):"Autore sconosciuto")+"")&&oe(k,f)},d(w){w&&u(e)}}}function dt(n){let e,l,t,s,a,o,d;const v=[tl,el],h=[];function _(f,k){return f[5]?1:0}e=_(n),l=h[e]=v[e](n);const p=[sl,ll],i=[];function z(f,k){return f[6]?1:0}return s=z(n),a=i[s]=p[s](n),{c(){l.c(),t=P(),a.c(),o=Le()},l(f){l.l(f),t=V(f),a.l(f),o=Le()},m(f,k){h[e].m(f,k),O(f,t,k),i[s].m(f,k),O(f,o,k),d=!0},p(f,k){let L=e;e=_(f),e===L?h[e].p(f,k):(ke(),U(h[L],1,1,()=>{h[L]=null}),ge(),l=h[e],l?l.p(f,k):(l=h[e]=v[e](f),l.c()),R(l,1),l.m(t.parentNode,t));let w=s;s=z(f),s===w?i[s].p(f,k):(ke(),U(i[w],1,1,()=>{i[w]=null}),ge(),a=i[s],a?a.p(f,k):(a=i[s]=p[s](f),a.c()),R(a,1),a.m(o.parentNode,o))},i(f){d||(R(l),R(a),d=!0)},o(f){U(l),U(a),d=!1},d(f){h[e].d(f),f&&u(t),i[s].d(f),f&&u(o)}}}function el(n){let e,l,t,s,a,o,d,v=n[7],h=[];for(let _=0;_<v.length;_+=1)h[_]=ht(ut(n,v,_));return{c(){e=b("div"),l=b("select");for(let _=0;_<h.length;_+=1)h[_].c();t=P(),s=b("button"),a=A("Annulla"),this.h()},l(_){e=g(_,"DIV",{class:!0});var p=m(e);l=g(p,"SELECT",{name:!0,class:!0});var i=m(l);for(let f=0;f<h.length;f+=1)h[f].l(i);i.forEach(u),t=V(p),s=g(p,"BUTTON",{class:!0});var z=m(s);a=B(z,"Annulla"),z.forEach(u),p.forEach(u),this.h()},h(){c(l,"name","Library"),c(l,"class","library-select svelte-195id1z"),n[0]===void 0&&Dt(()=>n[16].call(l)),c(s,"class","annulla svelte-195id1z"),c(e,"class","action-card svelte-195id1z")},m(_,p){O(_,e,p),r(e,l);for(let i=0;i<h.length;i+=1)h[i]&&h[i].m(l,null);nt(l,n[0],!0),r(e,t),r(e,s),r(s,a),o||(d=[te(l,"change",n[16]),te(l,"change",n[17]),te(s,"click",n[12])],o=!0)},p(_,p){if(p&128){v=_[7];let i;for(i=0;i<v.length;i+=1){const z=ut(_,v,i);h[i]?h[i].p(z,p):(h[i]=ht(z),h[i].c(),h[i].m(l,null))}for(;i<h.length;i+=1)h[i].d(1);h.length=v.length}p&129&&nt(l,_[0])},i:J,o:J,d(_){_&&u(e),Et(h,_),o=!1,Nt(d)}}}function tl(n){let e,l,t,s,a,o,d,v,h,_;return t=new jt({}),{c(){e=b("button"),l=b("span"),ne(t.$$.fragment),s=P(),a=b("span"),o=A("Cambia Biblioteca"),this.h()},l(p){e=g(p,"BUTTON",{class:!0});var i=m(e);l=g(i,"SPAN",{class:!0});var z=m(l);ie(t.$$.fragment,z),z.forEach(u),s=V(i),a=g(i,"SPAN",{class:!0});var f=m(a);o=B(f,"Cambia Biblioteca"),f.forEach(u),i.forEach(u),this.h()},h(){c(l,"class","icon svelte-195id1z"),c(a,"class","text"),c(e,"class",d="action-card "+(n[5]?"select-active":"")+" svelte-195id1z")},m(p,i){O(p,e,i),r(e,l),ce(t,l,null),r(e,s),r(e,a),r(a,o),v=!0,h||(_=te(e,"click",n[13]),h=!0)},p(p,i){(!v||i&32&&d!==(d="action-card "+(p[5]?"select-active":"")+" svelte-195id1z"))&&c(e,"class",d)},i(p){v||(R(t.$$.fragment,p),v=!0)},o(p){U(t.$$.fragment,p),v=!1},d(p){p&&u(e),ue(t),h=!1,_()}}}function ht(n){let e,l=n[22].replace("_"," ")+"",t,s;return{c(){e=b("option"),t=A(l),this.h()},l(a){e=g(a,"OPTION",{});var o=m(e);t=B(o,l),o.forEach(u),this.h()},h(){e.__value=s=n[22],e.value=e.__value},m(a,o){O(a,e,o),r(e,t)},p(a,o){o&128&&l!==(l=a[22].replace("_"," ")+"")&&oe(t,l),o&128&&s!==(s=a[22])&&(e.__value=s,e.value=e.__value)},d(a){a&&u(e)}}}function ll(n){let e,l,t,s,a,o,d,v,h,_,p;return{c(){e=b("div"),l=b("input"),t=P(),s=b("div"),a=b("button"),o=A("crea"),d=P(),v=b("button"),h=A("Annulla"),this.h()},l(i){e=g(i,"DIV",{class:!0});var z=m(e);l=g(z,"INPUT",{type:!0,name:!0,class:!0}),t=V(z),s=g(z,"DIV",{class:!0});var f=m(s);a=g(f,"BUTTON",{class:!0});var k=m(a);o=B(k,"crea"),k.forEach(u),d=V(f),v=g(f,"BUTTON",{class:!0});var L=m(v);h=B(L,"Annulla"),L.forEach(u),f.forEach(u),z.forEach(u),this.h()},h(){c(l,"type","text"),c(l,"name","library-name"),c(l,"class","library-select svelte-195id1z"),c(a,"class","svelte-195id1z"),c(v,"class","annulla svelte-195id1z"),c(s,"class","buttons svelte-195id1z"),c(e,"class","action-card svelte-195id1z")},m(i,z){O(i,e,z),r(e,l),it(l,n[8]),r(e,t),r(e,s),r(s,a),r(a,o),r(s,d),r(s,v),r(v,h),_||(p=[te(l,"input",n[18]),te(a,"click",n[19]),te(v,"click",n[14])],_=!0)},p(i,z){z&256&&l.value!==i[8]&&it(l,i[8])},i:J,o:J,d(i){i&&u(e),_=!1,Nt(p)}}}function sl(n){let e,l,t,s,a,o,d,v,h;return t=new Ht({}),{c(){e=b("button"),l=b("span"),ne(t.$$.fragment),s=P(),a=b("span"),o=A("Crea Nuova biblioteca"),this.h()},l(_){e=g(_,"BUTTON",{class:!0});var p=m(e);l=g(p,"SPAN",{class:!0});var i=m(l);ie(t.$$.fragment,i),i.forEach(u),s=V(p),a=g(p,"SPAN",{class:!0});var z=m(a);o=B(z,"Crea Nuova biblioteca"),z.forEach(u),p.forEach(u),this.h()},h(){c(l,"class","icon svelte-195id1z"),c(a,"class","text"),c(e,"class","action-card svelte-195id1z")},m(_,p){O(_,e,p),r(e,l),ce(t,l,null),r(e,s),r(e,a),r(a,o),d=!0,v||(h=te(e,"click",n[15]),v=!0)},p:J,i(_){d||(R(t.$$.fragment,_),d=!0)},o(_){U(t.$$.fragment,_),d=!1},d(_){_&&u(e),ue(t),v=!1,h()}}}function al(n){var q;let e,l,t,s=n[11]()+"",a,o,d=(((q=n[9])==null?void 0:q.displayName)||"Lettore")+"",v,h,_,p,i,z,f,k,L;const w=[Zt,Yt],$=[];function M(D,I){return D[0]||D[3]===2?0:1}return f=M(n),k=$[f]=w[f](n),{c(){e=b("div"),l=b("div"),t=b("h2"),a=A(s),o=A(", "),v=A(d),h=A("!"),_=P(),p=b("p"),i=A("Benvenuto nella tua biblioteca personale"),z=P(),k.c(),this.h()},l(D){e=g(D,"DIV",{class:!0});var I=m(e);l=g(I,"DIV",{class:!0});var E=m(l);t=g(E,"H2",{class:!0});var y=m(t);a=B(y,s),o=B(y,", "),v=B(y,d),h=B(y,"!"),y.forEach(u),_=V(E),p=g(E,"P",{});var S=m(p);i=B(S,"Benvenuto nella tua biblioteca personale"),S.forEach(u),E.forEach(u),z=V(I),k.l(I),I.forEach(u),this.h()},h(){c(t,"class","svelte-195id1z"),c(l,"class","welcome-section svelte-195id1z"),c(e,"class","content svelte-195id1z")},m(D,I){O(D,e,I),r(e,l),r(l,t),r(t,a),r(t,o),r(t,v),r(t,h),r(l,_),r(l,p),r(p,i),r(e,z),$[f].m(e,null),L=!0},p(D,[I]){var y;(!L||I&512)&&d!==(d=(((y=D[9])==null?void 0:y.displayName)||"Lettore")+"")&&oe(v,d);let E=f;f=M(D),f===E?$[f].p(D,I):(ke(),U($[E],1,1,()=>{$[E]=null}),ge(),k=$[f],k?k.p(D,I):(k=$[f]=w[f](D),k.c()),R(k,1),k.m(e,null))},i(D){L||(R(k),L=!0)},o(D){U(k),L=!1},d(D){D&&u(e),$[f].d()}}}const vt=(n,e)=>e!==0;function rl(n,e,l){let t,s;rt(n,Me,E=>l(0,t=E)),rt(n,Pt,E=>l(9,s=E));let a=[],o=!0,d,v={totalBooks:0,booksRead:0,unread:0},h=!1,_=!1,p=[],i="";wt(async()=>{yt.set(!1),Lt.set(await Vt(s.uid).then(E=>l(3,d=E))),await Ie(`users/${s.uid}/biblioteca`).then(async E=>{At(Me,t=E,t),console.log(E),await Ie(`protectedData/${E}`).then(y=>{console.log("DATAfrom db:",y),l(1,a=y.slice(0,4)),l(4,v.totalBooks=y.length,v),l(4,v.booksRead=y.filter(S=>S.read).length,v),l(4,v.unread=y.filter(S=>!S.read).length,v),l(2,o=!1)})}),console.log(s.uid),console.log("role:",d),console.log("Lib:",t)});const z=async E=>{await Ie(`protectedData/${E}`).then(y=>{l(1,a=y.slice(0,4)),l(4,v.totalBooks=y.length,v),l(4,v.booksRead=y.filter(S=>S.read).length,v),l(4,v.unread=y.filter(S=>!S.read).length,v),l(2,o=!1)})},f=()=>{const E=new Date().getHours();return E<12?"Buongiorno":E<18?"Buon pomeriggio":"Buonasera"},k=()=>l(5,h=!h),L=async()=>{l(7,p=await St()),await Ie(`protectedData/${t}`),k()},w=()=>l(6,_=!_),$=()=>{w()};function M(){t=Bt(this),Me.set(t),l(7,p)}const q=async()=>{await Tt(`users/${s.uid}/`,{biblioteca:`${t}`}),await z(t),l(5,h=!1)};function D(){i=this.value,l(8,i)}const I=async()=>{if(i){console.log("newLibName",i);try{await Ct(i.replace(" ","_")),await z(t)}catch(E){console.error("Error:",E)}finally{l(6,_=!1)}}};return n.$$.update=()=>{n.$$.dirty&1&&console.log(t)},[t,a,o,d,v,h,_,p,i,s,z,f,k,L,w,$,M,q,D,I]}class hl extends Oe{constructor(e){super(),qe(this,e,rl,al,je,{})}}export{hl as component};
